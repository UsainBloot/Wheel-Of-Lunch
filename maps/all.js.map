{"version":3,"sources":["all.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","bgColour","fontColour",2,"name","lat","lng","vicinity",3,"window","WOL","./pages/global.js","./pages/main.js","./wheel-of-lunch.js",4,"$","ErrorLocationLightbox","this","elems","id","ID","root","init","HTML_OUTPUT","CONTINUE_BUTTON","prototype","addWindow","prepend","addEvents","closeWindow","remove","self","on","jQuery","../../templates/localisation-error.html",5,"GeolocationLightbox","Geolocation","getLocation","app","geolocation","../../templates/localisation-loading.html","../modules/geolocation.js",6,"LocalisationLightbox","MapLightbox","CURRENT_LOCATION_BUTTON","FIND_LOCATION_BUTTON","showCurrentLocationLightbox","showFindLocationLightbox","lightbox","Map","../../templates/localisation.html","./geolocationLightbox.js","./mapLightbox.js",7,8,"ResultLightbox",9,10,"callback","position","options","enableHighAccuracy","maximumAge","navigator","getCurrentPosition","success","error","pos","coords","err","NoLocationLightbox","closeParentWindow","parentRoot","../lightboxes/errorLocationLightbox.js",11,"arguments","apply","dup",12,"Wheel","selector","canvas","document","getElementById","$canvas","getContext","data","restaurants","defaultRestaurants","width","height","startAngle","spinTimeout","isSpinning","spinArcStart","spinTime","spinTimeTotal","spinVelocity","ctx","rouletteWheel","outsideRadius","textRadius","insideRadius","angle","text","drag","clickedX","clickedY","currentDragX","currentDragY","previousDragX","previousDragY","isDragging","changedAngle","arcAngle","colours","SPIN_BUTTON","clearRect","strokeStyle","font","arc","Math","PI","draw","retIsSpinning","spin","mousedown","pageX","pageY","mousemove","atan2","top","left","addToStartAngle","mouseup","mouseout","forEach","restaurant","fillStyle","beginPath","fill","save","translate","cos","sin","rotate","printName","measureText","Pi","restore","drawArrow","moveTo","lineTo","isForward","spinAngleStart","random","stopRotate","spinAngle","easeOut","setTimeout","clearTimeout","degrees","arcd","index","floor","abs","split","join","latitude","longitude","x","y","lineHeight","fitWidth","str","splitDash","headText","tailText","idx","fillText","substr","charAt","b","c","d","ts","tc","setRestaurants","../data/colours.js","../data/restaurants.js","../lightboxes/resultLightbox.js","./confetti.js",13,14,"wheel","localisation","../lightboxes/localisationLightbox.js","../modules/confetti.js","../modules/map.js","../modules/wheel.js",15,"modules","global","page","utils",16,17,18],"mappings":"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","file":"all.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\r\n\r\nmodule.exports = (function() {\r\n  return {\r\n      bgColour: [\r\n    \t\"#B8D430\",\r\n    \t\"#3AB745\",\r\n    \t\"#029990\",\r\n    \t\"#3501CB\",\r\n    \t\"#2E2C75\",\r\n    \t\"#673A7E\",\r\n    \t\"#CC0071\",\r\n    \t\"#F80120\",\r\n    \t\"#F35B20\",\r\n    \t\"#FB9A00\",\r\n    \t\"#FFCC00\",\r\n    \t\"#FEF200\"\r\n    ],\r\n    fontColour: [\r\n    \t\"#333\",\r\n    \t\"#333\",\r\n    \t\"#333\",\r\n    \t\"#FFF\",\r\n    \t\"#FFF\",\r\n    \t\"#FFF\",\r\n    \t\"#FFF\",\r\n    \t\"#333\",\r\n    \t\"#333\",\r\n    \t\"#333\",\r\n    \t\"#333\",\r\n    \t\"#333\"\r\n    ]\r\n  };\r\n}());\r\n\n},{}],2:[function(require,module,exports){\n'use strict';\r\n\r\nmodule.exports = (function() {\r\n\r\n  return [\r\n      {name:\"Wendy's\", lat:\"\", lng:\"\", vicinity:\"\"}, {name:\"McDonalds\", lat:\"\", lng:\"\", vicinity:\"\"},\r\n      {name:\"Chick-fil-a\", lat:\"\", lng:\"\", vicinity:\"\"}, {name:\"Five Guys\", lat:\"\", lng:\"\", vicinity:\"\"},\r\n      {name:\"Gold Star\", lat:\"\", lng:\"\", vicinity:\"\"}, {name:\"La Mexicana\", lat:\"\", lng:\"\", vicinity:\"\"},\r\n      {name:\"Chipotle\", lat:\"\", lng:\"\", vicinity:\"\"}, {name:\"Tazza Mia\", lat:\"\", lng:\"\", vicinity:\"\"},\r\n      {name:\"Panera\", lat:\"\", lng:\"\", vicinity:\"\"}, {name:\"Just Crepes\", lat:\"\", lng:\"\", vicinity:\"\"},\r\n      {name:\"Arby's\", lat:\"\", lng:\"\", vicinity:\"\"}, {name:\"Indian\", lat:\"\", lng:\"\", vicinity:\"\"}\r\n    ];\r\n\r\n}());\r\n\n},{}],3:[function(require,module,exports){\n(function() {\r\n\r\n  'use strict';\r\n\r\n  var WOL = window.WOL = require('./wheel-of-lunch.js');\r\n\r\n  require('./pages/global.js');\r\n  require('./pages/main.js');\r\n\r\n})();\r\n\n},{\"./pages/global.js\":13,\"./pages/main.js\":14,\"./wheel-of-lunch.js\":15}],4:[function(require,module,exports){\nmodule.exports = (function($) {\r\n\r\n  'use strict';\r\n\r\n  /* Constants */\r\n  var HTML_OUTPUT = require('../../templates/localisation-error.html');\r\n  var ID = '#localisation-error';\r\n\r\n  /* Buttons */\r\n  var CONTINUE_BUTTON = '#localisation-continue-button';\r\n\r\n  function ErrorLocationLightbox() {\r\n\r\n    this.elems = {\r\n      id: ID,\r\n      root: null\r\n    }\r\n\r\n    this.init();\r\n  }\r\n\r\n  ErrorLocationLightbox.prototype.init = function() {\r\n    this.addWindow();\r\n  };\r\n\r\n  ErrorLocationLightbox.prototype.addWindow = function() {\r\n    $('body').prepend(HTML_OUTPUT);\r\n    this.elems.root = $(ID);\r\n    this.addEvents();\r\n  };\r\n\r\n  ErrorLocationLightbox.prototype.closeWindow = function() {\r\n    this.elems.root.remove();\r\n  };\r\n\r\n  ErrorLocationLightbox.prototype.addEvents = function() {\r\n    var self = this;\r\n\r\n    $(CONTINUE_BUTTON).on('click', function() {\r\n      self.closeWindow();\r\n    });\r\n  };\r\n\r\n  return ErrorLocationLightbox;\r\n}(jQuery));\r\n\n},{\"../../templates/localisation-error.html\":16}],5:[function(require,module,exports){\nmodule.exports = (function($) {\r\n\r\n  'use strict';\r\n\r\n  var Geolocation = require('../modules/geolocation.js');\r\n\r\n  /* Constants */\r\n  var HTML_OUTPUT = require('../../templates/localisation-loading.html');\r\n  var ID = '#geolocation';\r\n\r\n  function GeolocationLightbox() {\r\n\r\n    this.elems = {\r\n      id: ID,\r\n      root: null\r\n    }\r\n\r\n    this.init();\r\n  }\r\n\r\n  GeolocationLightbox.prototype.init = function() {\r\n    this.addWindow();\r\n  }\r\n\r\n  GeolocationLightbox.prototype.addWindow = function() {\r\n    $('body').prepend(HTML_OUTPUT);\r\n    this.elems.root = $(ID);\r\n    this.getLocation();\r\n  }\r\n\r\n  GeolocationLightbox.prototype.closeWindow = function() {\r\n    this.elems.root.remove();\r\n  }\r\n\r\n  GeolocationLightbox.prototype.getLocation = function() {\r\n    var self = this;\r\n    WOL.app.geolocation = new Geolocation(function() {\r\n      self.closeWindow();\r\n    });\r\n  };\r\n\r\n  return GeolocationLightbox;\r\n}(jQuery));\r\n\n},{\"../../templates/localisation-loading.html\":17,\"../modules/geolocation.js\":10}],6:[function(require,module,exports){\nmodule.exports = (function($) {\r\n\r\n  'use strict';\r\n\r\n  var GeolocationLightbox = require('./geolocationLightbox.js');\r\n  var MapLightbox = require('./mapLightbox.js');\r\n\r\n  /* Constants */\r\n  var HTML_OUTPUT = require('../../templates/localisation.html');\r\n  var ID = '#localisation';\r\n\r\n  /* Buttons */\r\n  var CURRENT_LOCATION_BUTTON = '#location-option-current';\r\n  var FIND_LOCATION_BUTTON = '#location-option-find';\r\n\r\n  function LocalisationLightbox() {\r\n\r\n    this.elems = {\r\n      id: ID,\r\n      root: null\r\n    }\r\n\r\n    this.init();\r\n  }\r\n\r\n  LocalisationLightbox.prototype.init = function() {\r\n    this.addWindow();\r\n  };\r\n\r\n  LocalisationLightbox.prototype.addWindow = function() {\r\n    $('body').prepend(HTML_OUTPUT);\r\n    this.elems.root = $(ID);\r\n    this.addEvents();\r\n  };\r\n\r\n  LocalisationLightbox.prototype.closeWindow = function() {\r\n    this.elems.root.remove();\r\n  };\r\n\r\n  LocalisationLightbox.prototype.addEvents = function() {\r\n    var self = this;\r\n\r\n    $(CURRENT_LOCATION_BUTTON).on('click', function() {\r\n      self.showCurrentLocationLightbox();\r\n      self.closeWindow();\r\n    });\r\n\r\n    $(FIND_LOCATION_BUTTON).on('click', function() {\r\n      self.showFindLocationLightbox();\r\n      self.closeWindow();\r\n    });\r\n  };\r\n\r\n  LocalisationLightbox.prototype.showCurrentLocationLightbox = function() {\r\n    WOL.app.lightbox.Geolocation = new GeolocationLightbox();\r\n  };\r\n\r\n  LocalisationLightbox.prototype.showFindLocationLightbox = function() {\r\n    WOL.app.lightbox.Map = new MapLightbox();\r\n  };\r\n\r\n  return LocalisationLightbox;\r\n}(jQuery));\r\n\n},{\"../../templates/localisation.html\":18,\"./geolocationLightbox.js\":5,\"./mapLightbox.js\":7}],7:[function(require,module,exports){\nmodule.exports = (function() {\r\n\r\n  'use strict';\r\n\r\n  function MapLightbox() {\r\n\r\n  }\r\n\r\n  return MapLightbox;\r\n}());\r\n\n},{}],8:[function(require,module,exports){\nmodule.exports = (function() {\r\n\r\n  'use strict';\r\n\r\n  function ResultLightbox() {\r\n\r\n  }\r\n\r\n  return ResultLightbox;\r\n}());\r\n\n},{}],9:[function(require,module,exports){\nmodule.exports = (function() {\r\n\r\n  'use strict';\r\n\r\n}());\r\n\n},{}],10:[function(require,module,exports){\nmodule.exports = (function() {\r\n\r\n  'use strict';\r\n\r\n  var ErrorLocationLightbox = require('../lightboxes/errorLocationLightbox.js');\r\n\r\n  function Geolocation(callback) {\r\n\r\n    this.callback = callback;\r\n    this.position = {};\r\n\r\n    this.options = {\r\n      enableHighAccuracy: true,\r\n      maximumAge: 0\r\n    };\r\n\r\n    this.getLocation();\r\n  }\r\n\r\n  Geolocation.prototype.getLocation = function() {\r\n    navigator.geolocation.getCurrentPosition(this.success, this.error, this.options);\r\n  };\r\n\r\n  Geolocation.prototype.success = function(pos) {\r\n    WOL.app.geolocation.position = pos.coords;\r\n    WOL.app.geolocation.callback();\r\n  };\r\n\r\n  Geolocation.prototype.error = function(err) {\r\n    WOL.app.geolocation.callback();\r\n    WOL.app.lightbox.NoLocationLightbox = new ErrorLocationLightbox();\r\n  };\r\n\r\n  Geolocation.prototype.closeParentWindow = function() {\r\n    this.elems.parentRoot.remove();\r\n  };\r\n\r\n  return Geolocation;\r\n}());\r\n\n},{\"../lightboxes/errorLocationLightbox.js\":4}],11:[function(require,module,exports){\narguments[4][9][0].apply(exports,arguments)\n},{\"dup\":9}],12:[function(require,module,exports){\nmodule.exports = (function() {\r\n\r\n  'use strict';\r\n\r\n  var colours = require('../data/colours.js');\r\n  var defaultRestaurants = require('../data/restaurants.js');\r\n  var ResultLightbox = require('../lightboxes/resultLightbox.js');\r\n  var Confetti = require('./confetti.js');\r\n\r\n  /* Buttons */\r\n  var SPIN_BUTTON = '#spin';\r\n\r\n  function Wheel(selector) {\r\n\r\n    var canvas = document.getElementById(selector);\r\n    var $canvas = $('#' + selector);\r\n\r\n    this.elems = {\r\n      selector: '#' + selector,\r\n      canvas: canvas,\r\n      $canvas: $canvas\r\n    }\r\n\r\n    if(!canvas.getContext) {\r\n      return;\r\n    }\r\n\r\n    this.data = {\r\n      canvas: canvas,\r\n      restaurants: defaultRestaurants,\r\n      width: 600,\r\n      height: 600,\r\n      startAngle: 0,\r\n      spinTimeout: null,\r\n      isSpinning: false,\r\n      spinArcStart: 10,\r\n      spinTime: 0,\r\n      spinTimeTotal: 0,\r\n      spinVelocity: 2000,\r\n      ctx: null,\r\n      rouletteWheel: {},\r\n      outsideRadius: 250,\r\n      textRadius: 194,\r\n      insideRadius: 150,\r\n      angle: null,\r\n      text: null,\r\n      drag: {\r\n        clickedX: null,\r\n        clickedY: null,\r\n        currentDragX: null,\r\n        currentDragY: null,\r\n        previousDragX: null,\r\n        previousDragY: null,\r\n        isDragging: null,\r\n        changedAngle: null,\r\n        arcAngle: null\r\n      }\r\n    }\r\n\r\n    this.init();\r\n  }\r\n\r\n  Wheel.prototype.init = function() {\r\n    this.data.ctx = this.data.canvas.getContext(\"2d\");\r\n    this.data.ctx.clearRect(0, 0, this.data.width, this.data.height);\r\n    this.data.ctx.strokeStyle = \"black\";\r\n    this.data.ctx.font = \"12px Helvetica, Arial\";\r\n    this.data.arc = Math.PI / (this.data.restaurants.length / 2);\r\n\r\n    this.draw();\r\n    this.addEvents();\r\n  }\r\n\r\n  Wheel.prototype.addEvents = function() {\r\n    var self = this;\r\n\r\n    $(SPIN_BUTTON).on('click', function() {\r\n      if(!self.retIsSpinning()) {\r\n  \t\t\tself.spin(true);\r\n  \t\t}\r\n    });\r\n\r\n    $(this.elems.selector).mousedown(function(e) {\r\n  \t\tself.data.drag.clickedX = e.pageX;\r\n  \t\tself.data.drag.clickedY = e.pageY;\r\n  \t\t//set up the first instance of previous drag\r\n  \t\tself.data.drag.previousDragX = e.pageX;\r\n  \t\tself.data.drag.previousDragY = e.pageY;\r\n  \t\tself.data.drag.isDragging = true;\r\n  \t});\r\n\r\n    $(this.elems.selector).mousemove(function(e) {\r\n  \t\tif(self.data.drag.isDragging && !self.retIsSpinning()) {\r\n  \t\t\tself.data.drag.currentDragX = e.pageX;\r\n  \t\t\tself.data.drag.currentDragY = e.pageY;\r\n\r\n  \t\t\t//finding the movement from the last drag\r\n  \t\t\tself.data.drag.changedAngle = Math.atan2(self.data.drag.currentDragY - $(SPIN_BUTTON).position().top, self.data.drag.currentDragX - $(SPIN_BUTTON).position().left);\r\n  \t\t\tself.data.drag.changedAngle -= Math.atan2(self.data.drag.previousDragY - $(SPIN_BUTTON).position().top, self.data.drag.previousDragX - $(SPIN_BUTTON).position().left);\r\n\r\n  \t\t\t//recalculating the arc from when the mouse was firsted click -- used to indicate a 'spin'\r\n  \t\t\tself.data.drag.arcAngle = Math.atan2(self.data.drag.currentDragY - $(SPIN_BUTTON).position().top, self.data.drag.currentDragX - $(SPIN_BUTTON).position().left);\r\n  \t\t\tself.data.drag.arcAngle -= Math.atan2(self.data.drag.clickedY - $(SPIN_BUTTON).position().top, self.data.drag.clickedX - $(SPIN_BUTTON).position().left);\r\n\r\n\r\n  \t\t\t//add whatever the angle has changed by from the last movement of the mouse\r\n  \t\t\tself.addToStartAngle(self.data.drag.changedAngle);\r\n  \t\t\tself.draw(true);\r\n\r\n  \t\t\t//update the previous with the current coordinate of the mouse\r\n  \t\t\tself.data.drag.previousDragY = self.data.drag.currentDragY;\r\n  \t\t\tself.data.drag.previousDragX = self.data.drag.currentDragX;\r\n  \t\t}\r\n  \t});\r\n\r\n  \t$(this.elems.selector).mouseup(function(e) {\r\n  \t\tif((self.data.drag.arcAngle >= 0.5) && !self.retIsSpinning() && self.data.drag.changedAngle > 0) { // a minimum delta of rad = 0.5 required to drag around the wheel to count as a 'spin'\r\n  \t\t\tself.spin(true);\r\n  \t\t} else if((self.data.drag.arcAngle < -4) && !self.retIsSpinning() && self.data.drag.changedAngle > 0) {\r\n  \t\t\tself.spin(true);\r\n  \t\t} else if((self.data.drag.arcAngle <= -0.5) && !self.retIsSpinning() && self.data.drag.changedAngle < 0) {\r\n  \t\t\tself.spin(false);\r\n  \t\t} else if((self.data.drag.arcAngle > 4) && !self.retIsSpinning() && self.data.drag.changedAngle < 0) {\r\n  \t\t\tself.spin(false);\r\n  \t\t}\r\n  \t\tself.data.drag.isDragging = false;\r\n  \t});\r\n    \r\n  \t$(this.elems.selector).mouseout(function(e) {\r\n  \t\tself.data.drag.isDragging = false;\r\n  \t});\r\n\r\n  };\r\n\r\n  Wheel.prototype.draw = function() {\r\n    var self = this;\r\n    this.data.ctx.clearRect(0, 0, this.data.width, this.data.height);\r\n    this.data.restaurants.forEach(function(restaurant, i) {\r\n      /* Render Segment */\r\n      self.data.angle = self.data.startAngle + i * self.data.arc;\r\n      self.data.ctx.fillStyle = colours.bgColour[i];\r\n\r\n      self.data.ctx.beginPath();\r\n      self.data.ctx.arc(self.data.width / 2, self.data.height / 2, self.data.outsideRadius, self.data.angle, self.data.angle + self.data.arc, false);\r\n      self.data.ctx.arc(self.data.width / 2, self.data.height / 2, self.data.insideRadius, self.data.angle + self.data.arc, self.data.angle, true);\r\n      self.data.ctx.fill();\r\n\r\n      self.data.ctx.save();\r\n\r\n      /* Render Text */\r\n      self.data.ctx.fillStyle = colours.fontColour[i];\r\n      self.data.ctx.translate(self.data.width / 2 + Math.cos(self.data.angle + self.data.arc /2) * self.data.textRadius,\r\n          self.data.height / 2 + Math.sin(self.data.angle + self.data.arc / 2) * self.data.textRadius);\r\n      self.data.ctx.rotate(self.data.angle + self.data.arc / 2 + Math.PI / 2);\r\n      self.printName(restaurant.name, -self.data.ctx.measureText(restaurant.name).width / 2, 0, 14, ((2 * Math.Pi * self.data.textRadius) / self.data.restaurants.length) - 10);\r\n      self.data.ctx.restore();\r\n    });\r\n    this.drawArrow();\r\n  };\r\n\r\n  Wheel.prototype.drawArrow = function() {\r\n    this.data.ctx.fillStyle = \"#333\";\r\n    this.data.ctx.beginPath();\r\n\t\tthis.data.ctx.moveTo(this.data.width / 2  - 4, this.data.height / 2  - (this.data.outsideRadius + 25));\r\n\t\tthis.data.ctx.lineTo(this.data.width / 2 + 4, this.data.height / 2  - (this.data.outsideRadius + 25));\r\n\t\tthis.data.ctx.lineTo(this.data.width / 2 + 4, this.data.height / 2  - (this.data.outsideRadius + 15));\r\n\t\tthis.data.ctx.lineTo(this.data.width / 2 + 9, this.data.height / 2  - (this.data.outsideRadius + 15));\r\n\t\tthis.data.ctx.lineTo(this.data.width / 2 + 0, this.data.height / 2  - (this.data.outsideRadius - 0));\r\n\t\tthis.data.ctx.lineTo(this.data.width / 2 - 9, this.data.height / 2  - (this.data.outsideRadius + 15));\r\n\t\tthis.data.ctx.lineTo(this.data.width / 2 - 4, this.data.height / 2  - (this.data.outsideRadius + 15));\r\n\t\tthis.data.ctx.lineTo(this.data.width / 2 - 4, this.data.height / 2 - (this.data.outsideRadius + 25));\r\n\t\tthis.data.ctx.fill();\r\n  };\r\n\r\n  Wheel.prototype.spin = function(isForward) {\r\n    this.data.spinAngleStart = Math.random() * 10 + 10;\r\n    this.data.spinTime = 0;\r\n    this.data.spinTimeTotal = Math.random() * 3 + 4 * this.data.spinVelocity;\r\n\r\n    if(!this.data.isSpinning && isForward) {\r\n      this.data.isSpinning = true;\r\n      this.rotate(true);\r\n    } else if (!this.data.isSpinning && !isForward) {\r\n      this.data.isSpinning = true;\r\n      this.rotate(false);\r\n    }\r\n  };\r\n\r\n  Wheel.prototype.retIsSpinning = function() {\r\n    return this.data.isSpinning;\r\n  };\r\n\r\n  Wheel.prototype.addToStartAngle = function(angle) {\r\n    this.data.startAngle += angle;\r\n  };\r\n\r\n  Wheel.prototype.rotate = function(isForward) {\r\n    var self = this;\r\n    this.data.spinTime += 30;\r\n    if(this.data.spinTime >= this.data.spinTimeTotal) {\r\n      this.stopRotate();\r\n      this.data.isSpinning = false;\r\n      return;\r\n    }\r\n    var spinAngle = this.data.spinAngleStart - this.easeOut(this.data.spinTime, 0, this.data.spinAngleStart, this.data.spinTimeTotal);\r\n    if(isForward) {\r\n      this.data.startAngle += (spinAngle * Math.PI / 180);\r\n    } else {\r\n      this.data.startAngle -= (spinAngle * Math.PI / 180);\r\n    }\r\n    this.draw();\r\n    this.data.spinTimeout = setTimeout(function() {\r\n      self.rotate(isForward);\r\n    }, 30);\r\n  };\r\n\r\n  Wheel.prototype.stopRotate = function() {\r\n    clearTimeout(this.data.spinTimeout);\r\n    var degrees = this.data.startAngle * 180 / Math.PI + 90,\r\n      arcd = this.data.arc * 180 / Math.PI,\r\n      index = Math.floor((360 - degrees % 360) / arcd);\r\n    this.data.ctx.save();\r\n\r\n    if(degrees < 0) {\r\n      degrees = Math.abs(degrees);\r\n      index = Math.floor((degrees % 360) / arcd);\r\n    }\r\n\r\n    var resultName = this.data.restaurants[index].name.split(' ').join('+'),\r\n      mapURL = \"http://maps.google.com/maps/dir/\",\r\n\t\t\toriginCoords = WOL.app.geolocation.position.latitude + \",\" + WOL.app.geolocation.position.longitude;\r\n\r\n    /* Display Result */\r\n    //WOL.app.lightboxes.result = new ResultLightbox();\r\n\r\n    this.data.ctx.restore();\r\n\r\n    //WOL.app.confetti = new Confetti();\r\n  };\r\n\r\n  Wheel.prototype.printName = function(text, x, y, lineHeight, fitWidth) {\r\n    var str, splitDash, headText, tailText, idx;\r\n    fitWidth = fitWidth || 0;\r\n\r\n    if(fitWidth <= 0) {\r\n      this.data.ctx.fillText(text, x, y);\r\n      return;\r\n    }\r\n\r\n    for(idx = 1; idx <= text.length; idx++) {\r\n      str = text.substr(0, idx);\r\n\r\n      if(this.data.ctx.measureText(str).width > fitWidth) {\r\n        splitDash = (text.charAt(idx - 2) != \" \") ? \"-\" : \"\";\r\n        headText = text.substr(0, idx - 1) + splitDash;\r\n        tailText = text.substr(idx - 1);\r\n        this.data.ctx.fillText(headText, -this.data.ctx.measureText(headText).width / 2, y - lineHeight);\r\n        this.printName(tailText, -this.data.ctx.measureText(tailText).width / 2, y + lineHeight, lineHeight, fitWidth - 10);\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.data.ctx.fillText(text, x, (y ? y - lineHeight : y));\r\n  };\r\n\r\n  Wheel.prototype.easeOut = function(t, b, c, d) {\r\n    var ts = (t /= d) * t;\r\n    var tc = ts * t;\r\n\r\n    return b + c * (tc + -3 * ts + 3 * t);\r\n  };\r\n\r\n  Wheel.prototype.setRestaurants = function(restaurants) {\r\n    this.data.restaurants = restaurants;\r\n    this.data.arc = Math.PI / (this.data.restaurants.length / 2);\r\n  };\r\n\r\n  return Wheel;\r\n}());\r\n\n},{\"../data/colours.js\":1,\"../data/restaurants.js\":2,\"../lightboxes/resultLightbox.js\":8,\"./confetti.js\":9}],13:[function(require,module,exports){\nmodule.exports = (function($) {\r\n\r\n  'use strict';\r\n\r\n}());\r\n\n},{}],14:[function(require,module,exports){\nmodule.exports = (function() {\r\n\r\n  'use strict';\r\n\r\n  var Wheel = require('../modules/wheel.js');\r\n  var LocalisationLightbox = require('../lightboxes/localisationLightbox.js');\r\n  var Map = require('../modules/map.js');\r\n  var Geolocation = require('../modules/geolocation.js');\r\n  var Confetti = require('../modules/confetti.js');\r\n\r\n  WOL.app.wheel = new Wheel('wheel');\r\n  WOL.app.lightbox.localisation = new LocalisationLightbox();\r\n\r\n}());\r\n\n},{\"../lightboxes/localisationLightbox.js\":6,\"../modules/confetti.js\":9,\"../modules/geolocation.js\":10,\"../modules/map.js\":11,\"../modules/wheel.js\":12}],15:[function(require,module,exports){\nmodule.exports = {\r\n  app: { lightbox: {} },\r\n  modules: {},\r\n  global: {},\r\n  page: {},\r\n  utils: {},\r\n  data: {}\r\n};\r\n\n},{}],16:[function(require,module,exports){\nmodule.exports = \"<div id=\\\"localisation-error\\\" class=\\\"alert alert-danger localisation\\\" role=\\\"alert\\\"><p>Oops! We can't find your location. <button id=\\\"localisation-continue-button\\\" type=\\\"button\\\" class=\\\"btn btn-danger btn-sm\\\"> Continue anyway</button></p></div>\";\n\n},{}],17:[function(require,module,exports){\nmodule.exports = \"<div id=\\\"geolocation\\\" class=\\\"panel panel-default localisation search-localisation\\\"><div class=\\\"panel-body\\\"><p>Hang on a moment, we are just getting your location<span class=\\\"one\\\">.</span><span class=\\\"two\\\">.</span><span class=\\\"three\\\">.</span></p></div></div>\";\n\n},{}],18:[function(require,module,exports){\nmodule.exports = \"<div id=\\\"localisation\\\" class=\\\"panel panel-default select-localisation\\\"><div class=\\\"panel-body\\\"><p>Please select an option</p> <button type=\\\"button\\\" id=\\\"location-option-current\\\" class=\\\"btn btn-success\\\">Use my location</button> <button type=\\\"button\\\" id=\\\"location-option-find\\\" class=\\\"btn btn-info\\\">Find a location</button></div></div>\";\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzb3VyY2UvanMvZGF0YS9jb2xvdXJzLmpzIiwic291cmNlL2pzL2RhdGEvcmVzdGF1cmFudHMuanMiLCJzb3VyY2UvanMvaW5pdC5qcyIsInNvdXJjZS9qcy9saWdodGJveGVzL2Vycm9yTG9jYXRpb25MaWdodGJveC5qcyIsInNvdXJjZS9qcy9saWdodGJveGVzL2dlb2xvY2F0aW9uTGlnaHRib3guanMiLCJzb3VyY2UvanMvbGlnaHRib3hlcy9sb2NhbGlzYXRpb25MaWdodGJveC5qcyIsInNvdXJjZS9qcy9saWdodGJveGVzL21hcExpZ2h0Ym94LmpzIiwic291cmNlL2pzL2xpZ2h0Ym94ZXMvcmVzdWx0TGlnaHRib3guanMiLCJzb3VyY2UvanMvbW9kdWxlcy9jb25mZXR0aS5qcyIsInNvdXJjZS9qcy9tb2R1bGVzL2dlb2xvY2F0aW9uLmpzIiwic291cmNlL2pzL21vZHVsZXMvd2hlZWwuanMiLCJzb3VyY2UvanMvcGFnZXMvZ2xvYmFsLmpzIiwic291cmNlL2pzL3BhZ2VzL21haW4uanMiLCJzb3VyY2UvanMvd2hlZWwtb2YtbHVuY2guanMiLCJzb3VyY2UvdGVtcGxhdGVzL2xvY2FsaXNhdGlvbi1lcnJvci5odG1sIiwic291cmNlL3RlbXBsYXRlcy9sb2NhbGlzYXRpb24tbG9hZGluZy5odG1sIiwic291cmNlL3RlbXBsYXRlcy9sb2NhbGlzYXRpb24uaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2UkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgICAgYmdDb2xvdXI6IFtcclxuICAgIFx0XCIjQjhENDMwXCIsXHJcbiAgICBcdFwiIzNBQjc0NVwiLFxyXG4gICAgXHRcIiMwMjk5OTBcIixcclxuICAgIFx0XCIjMzUwMUNCXCIsXHJcbiAgICBcdFwiIzJFMkM3NVwiLFxyXG4gICAgXHRcIiM2NzNBN0VcIixcclxuICAgIFx0XCIjQ0MwMDcxXCIsXHJcbiAgICBcdFwiI0Y4MDEyMFwiLFxyXG4gICAgXHRcIiNGMzVCMjBcIixcclxuICAgIFx0XCIjRkI5QTAwXCIsXHJcbiAgICBcdFwiI0ZGQ0MwMFwiLFxyXG4gICAgXHRcIiNGRUYyMDBcIlxyXG4gICAgXSxcclxuICAgIGZvbnRDb2xvdXI6IFtcclxuICAgIFx0XCIjMzMzXCIsXHJcbiAgICBcdFwiIzMzM1wiLFxyXG4gICAgXHRcIiMzMzNcIixcclxuICAgIFx0XCIjRkZGXCIsXHJcbiAgICBcdFwiI0ZGRlwiLFxyXG4gICAgXHRcIiNGRkZcIixcclxuICAgIFx0XCIjRkZGXCIsXHJcbiAgICBcdFwiIzMzM1wiLFxyXG4gICAgXHRcIiMzMzNcIixcclxuICAgIFx0XCIjMzMzXCIsXHJcbiAgICBcdFwiIzMzM1wiLFxyXG4gICAgXHRcIiMzMzNcIlxyXG4gICAgXVxyXG4gIH07XHJcbn0oKSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICByZXR1cm4gW1xyXG4gICAgICB7bmFtZTpcIldlbmR5J3NcIiwgbGF0OlwiXCIsIGxuZzpcIlwiLCB2aWNpbml0eTpcIlwifSwge25hbWU6XCJNY0RvbmFsZHNcIiwgbGF0OlwiXCIsIGxuZzpcIlwiLCB2aWNpbml0eTpcIlwifSxcclxuICAgICAge25hbWU6XCJDaGljay1maWwtYVwiLCBsYXQ6XCJcIiwgbG5nOlwiXCIsIHZpY2luaXR5OlwiXCJ9LCB7bmFtZTpcIkZpdmUgR3V5c1wiLCBsYXQ6XCJcIiwgbG5nOlwiXCIsIHZpY2luaXR5OlwiXCJ9LFxyXG4gICAgICB7bmFtZTpcIkdvbGQgU3RhclwiLCBsYXQ6XCJcIiwgbG5nOlwiXCIsIHZpY2luaXR5OlwiXCJ9LCB7bmFtZTpcIkxhIE1leGljYW5hXCIsIGxhdDpcIlwiLCBsbmc6XCJcIiwgdmljaW5pdHk6XCJcIn0sXHJcbiAgICAgIHtuYW1lOlwiQ2hpcG90bGVcIiwgbGF0OlwiXCIsIGxuZzpcIlwiLCB2aWNpbml0eTpcIlwifSwge25hbWU6XCJUYXp6YSBNaWFcIiwgbGF0OlwiXCIsIGxuZzpcIlwiLCB2aWNpbml0eTpcIlwifSxcclxuICAgICAge25hbWU6XCJQYW5lcmFcIiwgbGF0OlwiXCIsIGxuZzpcIlwiLCB2aWNpbml0eTpcIlwifSwge25hbWU6XCJKdXN0IENyZXBlc1wiLCBsYXQ6XCJcIiwgbG5nOlwiXCIsIHZpY2luaXR5OlwiXCJ9LFxyXG4gICAgICB7bmFtZTpcIkFyYnknc1wiLCBsYXQ6XCJcIiwgbG5nOlwiXCIsIHZpY2luaXR5OlwiXCJ9LCB7bmFtZTpcIkluZGlhblwiLCBsYXQ6XCJcIiwgbG5nOlwiXCIsIHZpY2luaXR5OlwiXCJ9XHJcbiAgICBdO1xyXG5cclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciBXT0wgPSB3aW5kb3cuV09MID0gcmVxdWlyZSgnLi93aGVlbC1vZi1sdW5jaC5qcycpO1xyXG5cclxuICByZXF1aXJlKCcuL3BhZ2VzL2dsb2JhbC5qcycpO1xyXG4gIHJlcXVpcmUoJy4vcGFnZXMvbWFpbi5qcycpO1xyXG5cclxufSkoKTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oJCkge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIC8qIENvbnN0YW50cyAqL1xyXG4gIHZhciBIVE1MX09VVFBVVCA9IHJlcXVpcmUoJy4uLy4uL3RlbXBsYXRlcy9sb2NhbGlzYXRpb24tZXJyb3IuaHRtbCcpO1xyXG4gIHZhciBJRCA9ICcjbG9jYWxpc2F0aW9uLWVycm9yJztcclxuXHJcbiAgLyogQnV0dG9ucyAqL1xyXG4gIHZhciBDT05USU5VRV9CVVRUT04gPSAnI2xvY2FsaXNhdGlvbi1jb250aW51ZS1idXR0b24nO1xyXG5cclxuICBmdW5jdGlvbiBFcnJvckxvY2F0aW9uTGlnaHRib3goKSB7XHJcblxyXG4gICAgdGhpcy5lbGVtcyA9IHtcclxuICAgICAgaWQ6IElELFxyXG4gICAgICByb290OiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0KCk7XHJcbiAgfVxyXG5cclxuICBFcnJvckxvY2F0aW9uTGlnaHRib3gucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuYWRkV2luZG93KCk7XHJcbiAgfTtcclxuXHJcbiAgRXJyb3JMb2NhdGlvbkxpZ2h0Ym94LnByb3RvdHlwZS5hZGRXaW5kb3cgPSBmdW5jdGlvbigpIHtcclxuICAgICQoJ2JvZHknKS5wcmVwZW5kKEhUTUxfT1VUUFVUKTtcclxuICAgIHRoaXMuZWxlbXMucm9vdCA9ICQoSUQpO1xyXG4gICAgdGhpcy5hZGRFdmVudHMoKTtcclxuICB9O1xyXG5cclxuICBFcnJvckxvY2F0aW9uTGlnaHRib3gucHJvdG90eXBlLmNsb3NlV2luZG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmVsZW1zLnJvb3QucmVtb3ZlKCk7XHJcbiAgfTtcclxuXHJcbiAgRXJyb3JMb2NhdGlvbkxpZ2h0Ym94LnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAkKENPTlRJTlVFX0JVVFRPTikub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNlbGYuY2xvc2VXaW5kb3coKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBFcnJvckxvY2F0aW9uTGlnaHRib3g7XHJcbn0oalF1ZXJ5KSk7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCQpIHtcclxuXHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICB2YXIgR2VvbG9jYXRpb24gPSByZXF1aXJlKCcuLi9tb2R1bGVzL2dlb2xvY2F0aW9uLmpzJyk7XHJcblxyXG4gIC8qIENvbnN0YW50cyAqL1xyXG4gIHZhciBIVE1MX09VVFBVVCA9IHJlcXVpcmUoJy4uLy4uL3RlbXBsYXRlcy9sb2NhbGlzYXRpb24tbG9hZGluZy5odG1sJyk7XHJcbiAgdmFyIElEID0gJyNnZW9sb2NhdGlvbic7XHJcblxyXG4gIGZ1bmN0aW9uIEdlb2xvY2F0aW9uTGlnaHRib3goKSB7XHJcblxyXG4gICAgdGhpcy5lbGVtcyA9IHtcclxuICAgICAgaWQ6IElELFxyXG4gICAgICByb290OiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0KCk7XHJcbiAgfVxyXG5cclxuICBHZW9sb2NhdGlvbkxpZ2h0Ym94LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmFkZFdpbmRvdygpO1xyXG4gIH1cclxuXHJcbiAgR2VvbG9jYXRpb25MaWdodGJveC5wcm90b3R5cGUuYWRkV2luZG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkKCdib2R5JykucHJlcGVuZChIVE1MX09VVFBVVCk7XHJcbiAgICB0aGlzLmVsZW1zLnJvb3QgPSAkKElEKTtcclxuICAgIHRoaXMuZ2V0TG9jYXRpb24oKTtcclxuICB9XHJcblxyXG4gIEdlb2xvY2F0aW9uTGlnaHRib3gucHJvdG90eXBlLmNsb3NlV2luZG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmVsZW1zLnJvb3QucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBHZW9sb2NhdGlvbkxpZ2h0Ym94LnByb3RvdHlwZS5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgV09MLmFwcC5nZW9sb2NhdGlvbiA9IG5ldyBHZW9sb2NhdGlvbihmdW5jdGlvbigpIHtcclxuICAgICAgc2VsZi5jbG9zZVdpbmRvdygpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIEdlb2xvY2F0aW9uTGlnaHRib3g7XHJcbn0oalF1ZXJ5KSk7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCQpIHtcclxuXHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICB2YXIgR2VvbG9jYXRpb25MaWdodGJveCA9IHJlcXVpcmUoJy4vZ2VvbG9jYXRpb25MaWdodGJveC5qcycpO1xyXG4gIHZhciBNYXBMaWdodGJveCA9IHJlcXVpcmUoJy4vbWFwTGlnaHRib3guanMnKTtcclxuXHJcbiAgLyogQ29uc3RhbnRzICovXHJcbiAgdmFyIEhUTUxfT1VUUFVUID0gcmVxdWlyZSgnLi4vLi4vdGVtcGxhdGVzL2xvY2FsaXNhdGlvbi5odG1sJyk7XHJcbiAgdmFyIElEID0gJyNsb2NhbGlzYXRpb24nO1xyXG5cclxuICAvKiBCdXR0b25zICovXHJcbiAgdmFyIENVUlJFTlRfTE9DQVRJT05fQlVUVE9OID0gJyNsb2NhdGlvbi1vcHRpb24tY3VycmVudCc7XHJcbiAgdmFyIEZJTkRfTE9DQVRJT05fQlVUVE9OID0gJyNsb2NhdGlvbi1vcHRpb24tZmluZCc7XHJcblxyXG4gIGZ1bmN0aW9uIExvY2FsaXNhdGlvbkxpZ2h0Ym94KCkge1xyXG5cclxuICAgIHRoaXMuZWxlbXMgPSB7XHJcbiAgICAgIGlkOiBJRCxcclxuICAgICAgcm9vdDogbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgTG9jYWxpc2F0aW9uTGlnaHRib3gucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuYWRkV2luZG93KCk7XHJcbiAgfTtcclxuXHJcbiAgTG9jYWxpc2F0aW9uTGlnaHRib3gucHJvdG90eXBlLmFkZFdpbmRvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnYm9keScpLnByZXBlbmQoSFRNTF9PVVRQVVQpO1xyXG4gICAgdGhpcy5lbGVtcy5yb290ID0gJChJRCk7XHJcbiAgICB0aGlzLmFkZEV2ZW50cygpO1xyXG4gIH07XHJcblxyXG4gIExvY2FsaXNhdGlvbkxpZ2h0Ym94LnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5lbGVtcy5yb290LnJlbW92ZSgpO1xyXG4gIH07XHJcblxyXG4gIExvY2FsaXNhdGlvbkxpZ2h0Ym94LnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAkKENVUlJFTlRfTE9DQVRJT05fQlVUVE9OKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgc2VsZi5zaG93Q3VycmVudExvY2F0aW9uTGlnaHRib3goKTtcclxuICAgICAgc2VsZi5jbG9zZVdpbmRvdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChGSU5EX0xPQ0FUSU9OX0JVVFRPTikub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNlbGYuc2hvd0ZpbmRMb2NhdGlvbkxpZ2h0Ym94KCk7XHJcbiAgICAgIHNlbGYuY2xvc2VXaW5kb3coKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIExvY2FsaXNhdGlvbkxpZ2h0Ym94LnByb3RvdHlwZS5zaG93Q3VycmVudExvY2F0aW9uTGlnaHRib3ggPSBmdW5jdGlvbigpIHtcclxuICAgIFdPTC5hcHAubGlnaHRib3guR2VvbG9jYXRpb24gPSBuZXcgR2VvbG9jYXRpb25MaWdodGJveCgpO1xyXG4gIH07XHJcblxyXG4gIExvY2FsaXNhdGlvbkxpZ2h0Ym94LnByb3RvdHlwZS5zaG93RmluZExvY2F0aW9uTGlnaHRib3ggPSBmdW5jdGlvbigpIHtcclxuICAgIFdPTC5hcHAubGlnaHRib3guTWFwID0gbmV3IE1hcExpZ2h0Ym94KCk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIExvY2FsaXNhdGlvbkxpZ2h0Ym94O1xyXG59KGpRdWVyeSkpO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBmdW5jdGlvbiBNYXBMaWdodGJveCgpIHtcclxuXHJcbiAgfVxyXG5cclxuICByZXR1cm4gTWFwTGlnaHRib3g7XHJcbn0oKSk7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGZ1bmN0aW9uIFJlc3VsdExpZ2h0Ym94KCkge1xyXG5cclxuICB9XHJcblxyXG4gIHJldHVybiBSZXN1bHRMaWdodGJveDtcclxufSgpKTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbn0oKSk7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciBFcnJvckxvY2F0aW9uTGlnaHRib3ggPSByZXF1aXJlKCcuLi9saWdodGJveGVzL2Vycm9yTG9jYXRpb25MaWdodGJveC5qcycpO1xyXG5cclxuICBmdW5jdGlvbiBHZW9sb2NhdGlvbihjYWxsYmFjaykge1xyXG5cclxuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMucG9zaXRpb24gPSB7fTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMgPSB7XHJcbiAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcclxuICAgICAgbWF4aW11bUFnZTogMFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldExvY2F0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0TG9jYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24odGhpcy5zdWNjZXNzLCB0aGlzLmVycm9yLCB0aGlzLm9wdGlvbnMpO1xyXG4gIH07XHJcblxyXG4gIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5zdWNjZXNzID0gZnVuY3Rpb24ocG9zKSB7XHJcbiAgICBXT0wuYXBwLmdlb2xvY2F0aW9uLnBvc2l0aW9uID0gcG9zLmNvb3JkcztcclxuICAgIFdPTC5hcHAuZ2VvbG9jYXRpb24uY2FsbGJhY2soKTtcclxuICB9O1xyXG5cclxuICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcclxuICAgIFdPTC5hcHAuZ2VvbG9jYXRpb24uY2FsbGJhY2soKTtcclxuICAgIFdPTC5hcHAubGlnaHRib3guTm9Mb2NhdGlvbkxpZ2h0Ym94ID0gbmV3IEVycm9yTG9jYXRpb25MaWdodGJveCgpO1xyXG4gIH07XHJcblxyXG4gIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5jbG9zZVBhcmVudFdpbmRvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5lbGVtcy5wYXJlbnRSb290LnJlbW92ZSgpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBHZW9sb2NhdGlvbjtcclxufSgpKTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgdmFyIGNvbG91cnMgPSByZXF1aXJlKCcuLi9kYXRhL2NvbG91cnMuanMnKTtcclxuICB2YXIgZGVmYXVsdFJlc3RhdXJhbnRzID0gcmVxdWlyZSgnLi4vZGF0YS9yZXN0YXVyYW50cy5qcycpO1xyXG4gIHZhciBSZXN1bHRMaWdodGJveCA9IHJlcXVpcmUoJy4uL2xpZ2h0Ym94ZXMvcmVzdWx0TGlnaHRib3guanMnKTtcclxuICB2YXIgQ29uZmV0dGkgPSByZXF1aXJlKCcuL2NvbmZldHRpLmpzJyk7XHJcblxyXG4gIC8qIEJ1dHRvbnMgKi9cclxuICB2YXIgU1BJTl9CVVRUT04gPSAnI3NwaW4nO1xyXG5cclxuICBmdW5jdGlvbiBXaGVlbChzZWxlY3Rvcikge1xyXG5cclxuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7XHJcbiAgICB2YXIgJGNhbnZhcyA9ICQoJyMnICsgc2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuZWxlbXMgPSB7XHJcbiAgICAgIHNlbGVjdG9yOiAnIycgKyBzZWxlY3RvcixcclxuICAgICAgY2FudmFzOiBjYW52YXMsXHJcbiAgICAgICRjYW52YXM6ICRjYW52YXNcclxuICAgIH1cclxuXHJcbiAgICBpZighY2FudmFzLmdldENvbnRleHQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgY2FudmFzOiBjYW52YXMsXHJcbiAgICAgIHJlc3RhdXJhbnRzOiBkZWZhdWx0UmVzdGF1cmFudHMsXHJcbiAgICAgIHdpZHRoOiA2MDAsXHJcbiAgICAgIGhlaWdodDogNjAwLFxyXG4gICAgICBzdGFydEFuZ2xlOiAwLFxyXG4gICAgICBzcGluVGltZW91dDogbnVsbCxcclxuICAgICAgaXNTcGlubmluZzogZmFsc2UsXHJcbiAgICAgIHNwaW5BcmNTdGFydDogMTAsXHJcbiAgICAgIHNwaW5UaW1lOiAwLFxyXG4gICAgICBzcGluVGltZVRvdGFsOiAwLFxyXG4gICAgICBzcGluVmVsb2NpdHk6IDIwMDAsXHJcbiAgICAgIGN0eDogbnVsbCxcclxuICAgICAgcm91bGV0dGVXaGVlbDoge30sXHJcbiAgICAgIG91dHNpZGVSYWRpdXM6IDI1MCxcclxuICAgICAgdGV4dFJhZGl1czogMTk0LFxyXG4gICAgICBpbnNpZGVSYWRpdXM6IDE1MCxcclxuICAgICAgYW5nbGU6IG51bGwsXHJcbiAgICAgIHRleHQ6IG51bGwsXHJcbiAgICAgIGRyYWc6IHtcclxuICAgICAgICBjbGlja2VkWDogbnVsbCxcclxuICAgICAgICBjbGlja2VkWTogbnVsbCxcclxuICAgICAgICBjdXJyZW50RHJhZ1g6IG51bGwsXHJcbiAgICAgICAgY3VycmVudERyYWdZOiBudWxsLFxyXG4gICAgICAgIHByZXZpb3VzRHJhZ1g6IG51bGwsXHJcbiAgICAgICAgcHJldmlvdXNEcmFnWTogbnVsbCxcclxuICAgICAgICBpc0RyYWdnaW5nOiBudWxsLFxyXG4gICAgICAgIGNoYW5nZWRBbmdsZTogbnVsbCxcclxuICAgICAgICBhcmNBbmdsZTogbnVsbFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0KCk7XHJcbiAgfVxyXG5cclxuICBXaGVlbC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5kYXRhLmN0eCA9IHRoaXMuZGF0YS5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgdGhpcy5kYXRhLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5kYXRhLndpZHRoLCB0aGlzLmRhdGEuaGVpZ2h0KTtcclxuICAgIHRoaXMuZGF0YS5jdHguc3Ryb2tlU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICB0aGlzLmRhdGEuY3R4LmZvbnQgPSBcIjEycHggSGVsdmV0aWNhLCBBcmlhbFwiO1xyXG4gICAgdGhpcy5kYXRhLmFyYyA9IE1hdGguUEkgLyAodGhpcy5kYXRhLnJlc3RhdXJhbnRzLmxlbmd0aCAvIDIpO1xyXG5cclxuICAgIHRoaXMuZHJhdygpO1xyXG4gICAgdGhpcy5hZGRFdmVudHMoKTtcclxuICB9XHJcblxyXG4gIFdoZWVsLnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAkKFNQSU5fQlVUVE9OKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgaWYoIXNlbGYucmV0SXNTcGlubmluZygpKSB7XHJcbiAgXHRcdFx0c2VsZi5zcGluKHRydWUpO1xyXG4gIFx0XHR9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKHRoaXMuZWxlbXMuc2VsZWN0b3IpLm1vdXNlZG93bihmdW5jdGlvbihlKSB7XHJcbiAgXHRcdHNlbGYuZGF0YS5kcmFnLmNsaWNrZWRYID0gZS5wYWdlWDtcclxuICBcdFx0c2VsZi5kYXRhLmRyYWcuY2xpY2tlZFkgPSBlLnBhZ2VZO1xyXG4gIFx0XHQvL3NldCB1cCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgcHJldmlvdXMgZHJhZ1xyXG4gIFx0XHRzZWxmLmRhdGEuZHJhZy5wcmV2aW91c0RyYWdYID0gZS5wYWdlWDtcclxuICBcdFx0c2VsZi5kYXRhLmRyYWcucHJldmlvdXNEcmFnWSA9IGUucGFnZVk7XHJcbiAgXHRcdHNlbGYuZGF0YS5kcmFnLmlzRHJhZ2dpbmcgPSB0cnVlO1xyXG4gIFx0fSk7XHJcblxyXG4gICAgJCh0aGlzLmVsZW1zLnNlbGVjdG9yKS5tb3VzZW1vdmUoZnVuY3Rpb24oZSkge1xyXG4gIFx0XHRpZihzZWxmLmRhdGEuZHJhZy5pc0RyYWdnaW5nICYmICFzZWxmLnJldElzU3Bpbm5pbmcoKSkge1xyXG4gIFx0XHRcdHNlbGYuZGF0YS5kcmFnLmN1cnJlbnREcmFnWCA9IGUucGFnZVg7XHJcbiAgXHRcdFx0c2VsZi5kYXRhLmRyYWcuY3VycmVudERyYWdZID0gZS5wYWdlWTtcclxuXHJcbiAgXHRcdFx0Ly9maW5kaW5nIHRoZSBtb3ZlbWVudCBmcm9tIHRoZSBsYXN0IGRyYWdcclxuICBcdFx0XHRzZWxmLmRhdGEuZHJhZy5jaGFuZ2VkQW5nbGUgPSBNYXRoLmF0YW4yKHNlbGYuZGF0YS5kcmFnLmN1cnJlbnREcmFnWSAtICQoU1BJTl9CVVRUT04pLnBvc2l0aW9uKCkudG9wLCBzZWxmLmRhdGEuZHJhZy5jdXJyZW50RHJhZ1ggLSAkKFNQSU5fQlVUVE9OKS5wb3NpdGlvbigpLmxlZnQpO1xyXG4gIFx0XHRcdHNlbGYuZGF0YS5kcmFnLmNoYW5nZWRBbmdsZSAtPSBNYXRoLmF0YW4yKHNlbGYuZGF0YS5kcmFnLnByZXZpb3VzRHJhZ1kgLSAkKFNQSU5fQlVUVE9OKS5wb3NpdGlvbigpLnRvcCwgc2VsZi5kYXRhLmRyYWcucHJldmlvdXNEcmFnWCAtICQoU1BJTl9CVVRUT04pLnBvc2l0aW9uKCkubGVmdCk7XHJcblxyXG4gIFx0XHRcdC8vcmVjYWxjdWxhdGluZyB0aGUgYXJjIGZyb20gd2hlbiB0aGUgbW91c2Ugd2FzIGZpcnN0ZWQgY2xpY2sgLS0gdXNlZCB0byBpbmRpY2F0ZSBhICdzcGluJ1xyXG4gIFx0XHRcdHNlbGYuZGF0YS5kcmFnLmFyY0FuZ2xlID0gTWF0aC5hdGFuMihzZWxmLmRhdGEuZHJhZy5jdXJyZW50RHJhZ1kgLSAkKFNQSU5fQlVUVE9OKS5wb3NpdGlvbigpLnRvcCwgc2VsZi5kYXRhLmRyYWcuY3VycmVudERyYWdYIC0gJChTUElOX0JVVFRPTikucG9zaXRpb24oKS5sZWZ0KTtcclxuICBcdFx0XHRzZWxmLmRhdGEuZHJhZy5hcmNBbmdsZSAtPSBNYXRoLmF0YW4yKHNlbGYuZGF0YS5kcmFnLmNsaWNrZWRZIC0gJChTUElOX0JVVFRPTikucG9zaXRpb24oKS50b3AsIHNlbGYuZGF0YS5kcmFnLmNsaWNrZWRYIC0gJChTUElOX0JVVFRPTikucG9zaXRpb24oKS5sZWZ0KTtcclxuXHJcblxyXG4gIFx0XHRcdC8vYWRkIHdoYXRldmVyIHRoZSBhbmdsZSBoYXMgY2hhbmdlZCBieSBmcm9tIHRoZSBsYXN0IG1vdmVtZW50IG9mIHRoZSBtb3VzZVxyXG4gIFx0XHRcdHNlbGYuYWRkVG9TdGFydEFuZ2xlKHNlbGYuZGF0YS5kcmFnLmNoYW5nZWRBbmdsZSk7XHJcbiAgXHRcdFx0c2VsZi5kcmF3KHRydWUpO1xyXG5cclxuICBcdFx0XHQvL3VwZGF0ZSB0aGUgcHJldmlvdXMgd2l0aCB0aGUgY3VycmVudCBjb29yZGluYXRlIG9mIHRoZSBtb3VzZVxyXG4gIFx0XHRcdHNlbGYuZGF0YS5kcmFnLnByZXZpb3VzRHJhZ1kgPSBzZWxmLmRhdGEuZHJhZy5jdXJyZW50RHJhZ1k7XHJcbiAgXHRcdFx0c2VsZi5kYXRhLmRyYWcucHJldmlvdXNEcmFnWCA9IHNlbGYuZGF0YS5kcmFnLmN1cnJlbnREcmFnWDtcclxuICBcdFx0fVxyXG4gIFx0fSk7XHJcblxyXG4gIFx0JCh0aGlzLmVsZW1zLnNlbGVjdG9yKS5tb3VzZXVwKGZ1bmN0aW9uKGUpIHtcclxuICBcdFx0aWYoKHNlbGYuZGF0YS5kcmFnLmFyY0FuZ2xlID49IDAuNSkgJiYgIXNlbGYucmV0SXNTcGlubmluZygpICYmIHNlbGYuZGF0YS5kcmFnLmNoYW5nZWRBbmdsZSA+IDApIHsgLy8gYSBtaW5pbXVtIGRlbHRhIG9mIHJhZCA9IDAuNSByZXF1aXJlZCB0byBkcmFnIGFyb3VuZCB0aGUgd2hlZWwgdG8gY291bnQgYXMgYSAnc3BpbidcclxuICBcdFx0XHRzZWxmLnNwaW4odHJ1ZSk7XHJcbiAgXHRcdH0gZWxzZSBpZigoc2VsZi5kYXRhLmRyYWcuYXJjQW5nbGUgPCAtNCkgJiYgIXNlbGYucmV0SXNTcGlubmluZygpICYmIHNlbGYuZGF0YS5kcmFnLmNoYW5nZWRBbmdsZSA+IDApIHtcclxuICBcdFx0XHRzZWxmLnNwaW4odHJ1ZSk7XHJcbiAgXHRcdH0gZWxzZSBpZigoc2VsZi5kYXRhLmRyYWcuYXJjQW5nbGUgPD0gLTAuNSkgJiYgIXNlbGYucmV0SXNTcGlubmluZygpICYmIHNlbGYuZGF0YS5kcmFnLmNoYW5nZWRBbmdsZSA8IDApIHtcclxuICBcdFx0XHRzZWxmLnNwaW4oZmFsc2UpO1xyXG4gIFx0XHR9IGVsc2UgaWYoKHNlbGYuZGF0YS5kcmFnLmFyY0FuZ2xlID4gNCkgJiYgIXNlbGYucmV0SXNTcGlubmluZygpICYmIHNlbGYuZGF0YS5kcmFnLmNoYW5nZWRBbmdsZSA8IDApIHtcclxuICBcdFx0XHRzZWxmLnNwaW4oZmFsc2UpO1xyXG4gIFx0XHR9XHJcbiAgXHRcdHNlbGYuZGF0YS5kcmFnLmlzRHJhZ2dpbmcgPSBmYWxzZTtcclxuICBcdH0pO1xyXG4gICAgXHJcbiAgXHQkKHRoaXMuZWxlbXMuc2VsZWN0b3IpLm1vdXNlb3V0KGZ1bmN0aW9uKGUpIHtcclxuICBcdFx0c2VsZi5kYXRhLmRyYWcuaXNEcmFnZ2luZyA9IGZhbHNlO1xyXG4gIFx0fSk7XHJcblxyXG4gIH07XHJcblxyXG4gIFdoZWVsLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmRhdGEuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmRhdGEud2lkdGgsIHRoaXMuZGF0YS5oZWlnaHQpO1xyXG4gICAgdGhpcy5kYXRhLnJlc3RhdXJhbnRzLmZvckVhY2goZnVuY3Rpb24ocmVzdGF1cmFudCwgaSkge1xyXG4gICAgICAvKiBSZW5kZXIgU2VnbWVudCAqL1xyXG4gICAgICBzZWxmLmRhdGEuYW5nbGUgPSBzZWxmLmRhdGEuc3RhcnRBbmdsZSArIGkgKiBzZWxmLmRhdGEuYXJjO1xyXG4gICAgICBzZWxmLmRhdGEuY3R4LmZpbGxTdHlsZSA9IGNvbG91cnMuYmdDb2xvdXJbaV07XHJcblxyXG4gICAgICBzZWxmLmRhdGEuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBzZWxmLmRhdGEuY3R4LmFyYyhzZWxmLmRhdGEud2lkdGggLyAyLCBzZWxmLmRhdGEuaGVpZ2h0IC8gMiwgc2VsZi5kYXRhLm91dHNpZGVSYWRpdXMsIHNlbGYuZGF0YS5hbmdsZSwgc2VsZi5kYXRhLmFuZ2xlICsgc2VsZi5kYXRhLmFyYywgZmFsc2UpO1xyXG4gICAgICBzZWxmLmRhdGEuY3R4LmFyYyhzZWxmLmRhdGEud2lkdGggLyAyLCBzZWxmLmRhdGEuaGVpZ2h0IC8gMiwgc2VsZi5kYXRhLmluc2lkZVJhZGl1cywgc2VsZi5kYXRhLmFuZ2xlICsgc2VsZi5kYXRhLmFyYywgc2VsZi5kYXRhLmFuZ2xlLCB0cnVlKTtcclxuICAgICAgc2VsZi5kYXRhLmN0eC5maWxsKCk7XHJcblxyXG4gICAgICBzZWxmLmRhdGEuY3R4LnNhdmUoKTtcclxuXHJcbiAgICAgIC8qIFJlbmRlciBUZXh0ICovXHJcbiAgICAgIHNlbGYuZGF0YS5jdHguZmlsbFN0eWxlID0gY29sb3Vycy5mb250Q29sb3VyW2ldO1xyXG4gICAgICBzZWxmLmRhdGEuY3R4LnRyYW5zbGF0ZShzZWxmLmRhdGEud2lkdGggLyAyICsgTWF0aC5jb3Moc2VsZi5kYXRhLmFuZ2xlICsgc2VsZi5kYXRhLmFyYyAvMikgKiBzZWxmLmRhdGEudGV4dFJhZGl1cyxcclxuICAgICAgICAgIHNlbGYuZGF0YS5oZWlnaHQgLyAyICsgTWF0aC5zaW4oc2VsZi5kYXRhLmFuZ2xlICsgc2VsZi5kYXRhLmFyYyAvIDIpICogc2VsZi5kYXRhLnRleHRSYWRpdXMpO1xyXG4gICAgICBzZWxmLmRhdGEuY3R4LnJvdGF0ZShzZWxmLmRhdGEuYW5nbGUgKyBzZWxmLmRhdGEuYXJjIC8gMiArIE1hdGguUEkgLyAyKTtcclxuICAgICAgc2VsZi5wcmludE5hbWUocmVzdGF1cmFudC5uYW1lLCAtc2VsZi5kYXRhLmN0eC5tZWFzdXJlVGV4dChyZXN0YXVyYW50Lm5hbWUpLndpZHRoIC8gMiwgMCwgMTQsICgoMiAqIE1hdGguUGkgKiBzZWxmLmRhdGEudGV4dFJhZGl1cykgLyBzZWxmLmRhdGEucmVzdGF1cmFudHMubGVuZ3RoKSAtIDEwKTtcclxuICAgICAgc2VsZi5kYXRhLmN0eC5yZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZHJhd0Fycm93KCk7XHJcbiAgfTtcclxuXHJcbiAgV2hlZWwucHJvdG90eXBlLmRyYXdBcnJvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5kYXRhLmN0eC5maWxsU3R5bGUgPSBcIiMzMzNcIjtcclxuICAgIHRoaXMuZGF0YS5jdHguYmVnaW5QYXRoKCk7XHJcblx0XHR0aGlzLmRhdGEuY3R4Lm1vdmVUbyh0aGlzLmRhdGEud2lkdGggLyAyICAtIDQsIHRoaXMuZGF0YS5oZWlnaHQgLyAyICAtICh0aGlzLmRhdGEub3V0c2lkZVJhZGl1cyArIDI1KSk7XHJcblx0XHR0aGlzLmRhdGEuY3R4LmxpbmVUbyh0aGlzLmRhdGEud2lkdGggLyAyICsgNCwgdGhpcy5kYXRhLmhlaWdodCAvIDIgIC0gKHRoaXMuZGF0YS5vdXRzaWRlUmFkaXVzICsgMjUpKTtcclxuXHRcdHRoaXMuZGF0YS5jdHgubGluZVRvKHRoaXMuZGF0YS53aWR0aCAvIDIgKyA0LCB0aGlzLmRhdGEuaGVpZ2h0IC8gMiAgLSAodGhpcy5kYXRhLm91dHNpZGVSYWRpdXMgKyAxNSkpO1xyXG5cdFx0dGhpcy5kYXRhLmN0eC5saW5lVG8odGhpcy5kYXRhLndpZHRoIC8gMiArIDksIHRoaXMuZGF0YS5oZWlnaHQgLyAyICAtICh0aGlzLmRhdGEub3V0c2lkZVJhZGl1cyArIDE1KSk7XHJcblx0XHR0aGlzLmRhdGEuY3R4LmxpbmVUbyh0aGlzLmRhdGEud2lkdGggLyAyICsgMCwgdGhpcy5kYXRhLmhlaWdodCAvIDIgIC0gKHRoaXMuZGF0YS5vdXRzaWRlUmFkaXVzIC0gMCkpO1xyXG5cdFx0dGhpcy5kYXRhLmN0eC5saW5lVG8odGhpcy5kYXRhLndpZHRoIC8gMiAtIDksIHRoaXMuZGF0YS5oZWlnaHQgLyAyICAtICh0aGlzLmRhdGEub3V0c2lkZVJhZGl1cyArIDE1KSk7XHJcblx0XHR0aGlzLmRhdGEuY3R4LmxpbmVUbyh0aGlzLmRhdGEud2lkdGggLyAyIC0gNCwgdGhpcy5kYXRhLmhlaWdodCAvIDIgIC0gKHRoaXMuZGF0YS5vdXRzaWRlUmFkaXVzICsgMTUpKTtcclxuXHRcdHRoaXMuZGF0YS5jdHgubGluZVRvKHRoaXMuZGF0YS53aWR0aCAvIDIgLSA0LCB0aGlzLmRhdGEuaGVpZ2h0IC8gMiAtICh0aGlzLmRhdGEub3V0c2lkZVJhZGl1cyArIDI1KSk7XHJcblx0XHR0aGlzLmRhdGEuY3R4LmZpbGwoKTtcclxuICB9O1xyXG5cclxuICBXaGVlbC5wcm90b3R5cGUuc3BpbiA9IGZ1bmN0aW9uKGlzRm9yd2FyZCkge1xyXG4gICAgdGhpcy5kYXRhLnNwaW5BbmdsZVN0YXJ0ID0gTWF0aC5yYW5kb20oKSAqIDEwICsgMTA7XHJcbiAgICB0aGlzLmRhdGEuc3BpblRpbWUgPSAwO1xyXG4gICAgdGhpcy5kYXRhLnNwaW5UaW1lVG90YWwgPSBNYXRoLnJhbmRvbSgpICogMyArIDQgKiB0aGlzLmRhdGEuc3BpblZlbG9jaXR5O1xyXG5cclxuICAgIGlmKCF0aGlzLmRhdGEuaXNTcGlubmluZyAmJiBpc0ZvcndhcmQpIHtcclxuICAgICAgdGhpcy5kYXRhLmlzU3Bpbm5pbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLnJvdGF0ZSh0cnVlKTtcclxuICAgIH0gZWxzZSBpZiAoIXRoaXMuZGF0YS5pc1NwaW5uaW5nICYmICFpc0ZvcndhcmQpIHtcclxuICAgICAgdGhpcy5kYXRhLmlzU3Bpbm5pbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLnJvdGF0ZShmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgV2hlZWwucHJvdG90eXBlLnJldElzU3Bpbm5pbmcgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuaXNTcGlubmluZztcclxuICB9O1xyXG5cclxuICBXaGVlbC5wcm90b3R5cGUuYWRkVG9TdGFydEFuZ2xlID0gZnVuY3Rpb24oYW5nbGUpIHtcclxuICAgIHRoaXMuZGF0YS5zdGFydEFuZ2xlICs9IGFuZ2xlO1xyXG4gIH07XHJcblxyXG4gIFdoZWVsLnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbihpc0ZvcndhcmQpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuZGF0YS5zcGluVGltZSArPSAzMDtcclxuICAgIGlmKHRoaXMuZGF0YS5zcGluVGltZSA+PSB0aGlzLmRhdGEuc3BpblRpbWVUb3RhbCkge1xyXG4gICAgICB0aGlzLnN0b3BSb3RhdGUoKTtcclxuICAgICAgdGhpcy5kYXRhLmlzU3Bpbm5pbmcgPSBmYWxzZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHNwaW5BbmdsZSA9IHRoaXMuZGF0YS5zcGluQW5nbGVTdGFydCAtIHRoaXMuZWFzZU91dCh0aGlzLmRhdGEuc3BpblRpbWUsIDAsIHRoaXMuZGF0YS5zcGluQW5nbGVTdGFydCwgdGhpcy5kYXRhLnNwaW5UaW1lVG90YWwpO1xyXG4gICAgaWYoaXNGb3J3YXJkKSB7XHJcbiAgICAgIHRoaXMuZGF0YS5zdGFydEFuZ2xlICs9IChzcGluQW5nbGUgKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGF0YS5zdGFydEFuZ2xlIC09IChzcGluQW5nbGUgKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgIH1cclxuICAgIHRoaXMuZHJhdygpO1xyXG4gICAgdGhpcy5kYXRhLnNwaW5UaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgc2VsZi5yb3RhdGUoaXNGb3J3YXJkKTtcclxuICAgIH0sIDMwKTtcclxuICB9O1xyXG5cclxuICBXaGVlbC5wcm90b3R5cGUuc3RvcFJvdGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuZGF0YS5zcGluVGltZW91dCk7XHJcbiAgICB2YXIgZGVncmVlcyA9IHRoaXMuZGF0YS5zdGFydEFuZ2xlICogMTgwIC8gTWF0aC5QSSArIDkwLFxyXG4gICAgICBhcmNkID0gdGhpcy5kYXRhLmFyYyAqIDE4MCAvIE1hdGguUEksXHJcbiAgICAgIGluZGV4ID0gTWF0aC5mbG9vcigoMzYwIC0gZGVncmVlcyAlIDM2MCkgLyBhcmNkKTtcclxuICAgIHRoaXMuZGF0YS5jdHguc2F2ZSgpO1xyXG5cclxuICAgIGlmKGRlZ3JlZXMgPCAwKSB7XHJcbiAgICAgIGRlZ3JlZXMgPSBNYXRoLmFicyhkZWdyZWVzKTtcclxuICAgICAgaW5kZXggPSBNYXRoLmZsb29yKChkZWdyZWVzICUgMzYwKSAvIGFyY2QpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciByZXN1bHROYW1lID0gdGhpcy5kYXRhLnJlc3RhdXJhbnRzW2luZGV4XS5uYW1lLnNwbGl0KCcgJykuam9pbignKycpLFxyXG4gICAgICBtYXBVUkwgPSBcImh0dHA6Ly9tYXBzLmdvb2dsZS5jb20vbWFwcy9kaXIvXCIsXHJcblx0XHRcdG9yaWdpbkNvb3JkcyA9IFdPTC5hcHAuZ2VvbG9jYXRpb24ucG9zaXRpb24ubGF0aXR1ZGUgKyBcIixcIiArIFdPTC5hcHAuZ2VvbG9jYXRpb24ucG9zaXRpb24ubG9uZ2l0dWRlO1xyXG5cclxuICAgIC8qIERpc3BsYXkgUmVzdWx0ICovXHJcbiAgICAvL1dPTC5hcHAubGlnaHRib3hlcy5yZXN1bHQgPSBuZXcgUmVzdWx0TGlnaHRib3goKTtcclxuXHJcbiAgICB0aGlzLmRhdGEuY3R4LnJlc3RvcmUoKTtcclxuXHJcbiAgICAvL1dPTC5hcHAuY29uZmV0dGkgPSBuZXcgQ29uZmV0dGkoKTtcclxuICB9O1xyXG5cclxuICBXaGVlbC5wcm90b3R5cGUucHJpbnROYW1lID0gZnVuY3Rpb24odGV4dCwgeCwgeSwgbGluZUhlaWdodCwgZml0V2lkdGgpIHtcclxuICAgIHZhciBzdHIsIHNwbGl0RGFzaCwgaGVhZFRleHQsIHRhaWxUZXh0LCBpZHg7XHJcbiAgICBmaXRXaWR0aCA9IGZpdFdpZHRoIHx8IDA7XHJcblxyXG4gICAgaWYoZml0V2lkdGggPD0gMCkge1xyXG4gICAgICB0aGlzLmRhdGEuY3R4LmZpbGxUZXh0KHRleHQsIHgsIHkpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGlkeCA9IDE7IGlkeCA8PSB0ZXh0Lmxlbmd0aDsgaWR4KyspIHtcclxuICAgICAgc3RyID0gdGV4dC5zdWJzdHIoMCwgaWR4KTtcclxuXHJcbiAgICAgIGlmKHRoaXMuZGF0YS5jdHgubWVhc3VyZVRleHQoc3RyKS53aWR0aCA+IGZpdFdpZHRoKSB7XHJcbiAgICAgICAgc3BsaXREYXNoID0gKHRleHQuY2hhckF0KGlkeCAtIDIpICE9IFwiIFwiKSA/IFwiLVwiIDogXCJcIjtcclxuICAgICAgICBoZWFkVGV4dCA9IHRleHQuc3Vic3RyKDAsIGlkeCAtIDEpICsgc3BsaXREYXNoO1xyXG4gICAgICAgIHRhaWxUZXh0ID0gdGV4dC5zdWJzdHIoaWR4IC0gMSk7XHJcbiAgICAgICAgdGhpcy5kYXRhLmN0eC5maWxsVGV4dChoZWFkVGV4dCwgLXRoaXMuZGF0YS5jdHgubWVhc3VyZVRleHQoaGVhZFRleHQpLndpZHRoIC8gMiwgeSAtIGxpbmVIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMucHJpbnROYW1lKHRhaWxUZXh0LCAtdGhpcy5kYXRhLmN0eC5tZWFzdXJlVGV4dCh0YWlsVGV4dCkud2lkdGggLyAyLCB5ICsgbGluZUhlaWdodCwgbGluZUhlaWdodCwgZml0V2lkdGggLSAxMCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kYXRhLmN0eC5maWxsVGV4dCh0ZXh0LCB4LCAoeSA/IHkgLSBsaW5lSGVpZ2h0IDogeSkpO1xyXG4gIH07XHJcblxyXG4gIFdoZWVsLnByb3RvdHlwZS5lYXNlT3V0ID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xyXG4gICAgdmFyIHRzID0gKHQgLz0gZCkgKiB0O1xyXG4gICAgdmFyIHRjID0gdHMgKiB0O1xyXG5cclxuICAgIHJldHVybiBiICsgYyAqICh0YyArIC0zICogdHMgKyAzICogdCk7XHJcbiAgfTtcclxuXHJcbiAgV2hlZWwucHJvdG90eXBlLnNldFJlc3RhdXJhbnRzID0gZnVuY3Rpb24ocmVzdGF1cmFudHMpIHtcclxuICAgIHRoaXMuZGF0YS5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG4gICAgdGhpcy5kYXRhLmFyYyA9IE1hdGguUEkgLyAodGhpcy5kYXRhLnJlc3RhdXJhbnRzLmxlbmd0aCAvIDIpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBXaGVlbDtcclxufSgpKTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oJCkge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG59KCkpO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICB2YXIgV2hlZWwgPSByZXF1aXJlKCcuLi9tb2R1bGVzL3doZWVsLmpzJyk7XHJcbiAgdmFyIExvY2FsaXNhdGlvbkxpZ2h0Ym94ID0gcmVxdWlyZSgnLi4vbGlnaHRib3hlcy9sb2NhbGlzYXRpb25MaWdodGJveC5qcycpO1xyXG4gIHZhciBNYXAgPSByZXF1aXJlKCcuLi9tb2R1bGVzL21hcC5qcycpO1xyXG4gIHZhciBHZW9sb2NhdGlvbiA9IHJlcXVpcmUoJy4uL21vZHVsZXMvZ2VvbG9jYXRpb24uanMnKTtcclxuICB2YXIgQ29uZmV0dGkgPSByZXF1aXJlKCcuLi9tb2R1bGVzL2NvbmZldHRpLmpzJyk7XHJcblxyXG4gIFdPTC5hcHAud2hlZWwgPSBuZXcgV2hlZWwoJ3doZWVsJyk7XHJcbiAgV09MLmFwcC5saWdodGJveC5sb2NhbGlzYXRpb24gPSBuZXcgTG9jYWxpc2F0aW9uTGlnaHRib3goKTtcclxuXHJcbn0oKSk7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGFwcDogeyBsaWdodGJveDoge30gfSxcclxuICBtb2R1bGVzOiB7fSxcclxuICBnbG9iYWw6IHt9LFxyXG4gIHBhZ2U6IHt9LFxyXG4gIHV0aWxzOiB7fSxcclxuICBkYXRhOiB7fVxyXG59O1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBpZD1cXFwibG9jYWxpc2F0aW9uLWVycm9yXFxcIiBjbGFzcz1cXFwiYWxlcnQgYWxlcnQtZGFuZ2VyIGxvY2FsaXNhdGlvblxcXCIgcm9sZT1cXFwiYWxlcnRcXFwiPjxwPk9vcHMhIFdlIGNhbid0IGZpbmQgeW91ciBsb2NhdGlvbi4gPGJ1dHRvbiBpZD1cXFwibG9jYWxpc2F0aW9uLWNvbnRpbnVlLWJ1dHRvblxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kYW5nZXIgYnRuLXNtXFxcIj4gQ29udGludWUgYW55d2F5PC9idXR0b24+PC9wPjwvZGl2PlwiO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgaWQ9XFxcImdlb2xvY2F0aW9uXFxcIiBjbGFzcz1cXFwicGFuZWwgcGFuZWwtZGVmYXVsdCBsb2NhbGlzYXRpb24gc2VhcmNoLWxvY2FsaXNhdGlvblxcXCI+PGRpdiBjbGFzcz1cXFwicGFuZWwtYm9keVxcXCI+PHA+SGFuZyBvbiBhIG1vbWVudCwgd2UgYXJlIGp1c3QgZ2V0dGluZyB5b3VyIGxvY2F0aW9uPHNwYW4gY2xhc3M9XFxcIm9uZVxcXCI+Ljwvc3Bhbj48c3BhbiBjbGFzcz1cXFwidHdvXFxcIj4uPC9zcGFuPjxzcGFuIGNsYXNzPVxcXCJ0aHJlZVxcXCI+Ljwvc3Bhbj48L3A+PC9kaXY+PC9kaXY+XCI7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBpZD1cXFwibG9jYWxpc2F0aW9uXFxcIiBjbGFzcz1cXFwicGFuZWwgcGFuZWwtZGVmYXVsdCBzZWxlY3QtbG9jYWxpc2F0aW9uXFxcIj48ZGl2IGNsYXNzPVxcXCJwYW5lbC1ib2R5XFxcIj48cD5QbGVhc2Ugc2VsZWN0IGFuIG9wdGlvbjwvcD4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGlkPVxcXCJsb2NhdGlvbi1vcHRpb24tY3VycmVudFxcXCIgY2xhc3M9XFxcImJ0biBidG4tc3VjY2Vzc1xcXCI+VXNlIG15IGxvY2F0aW9uPC9idXR0b24+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBpZD1cXFwibG9jYXRpb24tb3B0aW9uLWZpbmRcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWluZm9cXFwiPkZpbmQgYSBsb2NhdGlvbjwvYnV0dG9uPjwvZGl2PjwvZGl2PlwiO1xuIl19\n"],"sourceRoot":"/source/"}