!function t(a,i,n){function e(o,r){if(!i[o]){if(!a[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[o]={exports:{}};a[o][0].call(u.exports,function(t){var i=a[o][1][t];return e(i?i:t)},u,u.exports,t,a,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)e(n[o]);return e}({1:[function(t,a,i){!function(t){function a(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function i(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function n(t,a,i){if(a.charAt(i)!=t.charAt(0))return!1;for(var n=1,e=t.length;e>n;n++)if(a.charAt(i+n)!=t.charAt(n))return!1;return!0}function e(a,i,n,r){var l=[],c=null,u=null,d=null;for(u=n[n.length-1];a.length>0;){if(d=a.shift(),u&&"<"==u.tag&&!(d.tag in w))throw new Error("Illegal content in < super tag.");if(t.tags[d.tag]<=t.tags.$||s(d,r))n.push(d),d.nodes=e(a,d.tag,n,r);else{if("/"==d.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+d.n);if(c=n.pop(),d.n!=c.n&&!o(d.n,c.n,r))throw new Error("Nesting error: "+c.n+" vs. "+d.n);return c.end=d.i,l}"\n"==d.tag&&(d.last=0==a.length||"\n"==a[0].tag)}l.push(d)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return l}function s(t,a){for(var i=0,n=a.length;n>i;i++)if(a[i].o==t.n)return t.tag="#",!0}function o(t,a,i){for(var n=0,e=i.length;e>n;n++)if(i[n].c==t&&i[n].o==a)return!0}function r(t){var a=[];for(var i in t)a.push('"'+c(i)+'": function(c,p,t,i) {'+t[i]+"}");return"{ "+a.join(",")+" }"}function l(t){var a=[];for(var i in t.partials)a.push('"'+c(i)+'":{name:"'+c(t.partials[i].name)+'", '+l(t.partials[i])+"}");return"partials: {"+a.join(",")+"}, subs: "+r(t.subs)}function c(t){return t.replace(v,"\\\\").replace(f,'\\"').replace(m,"\\n").replace(b,"\\r").replace(x,"\\u2028").replace(y,"\\u2029")}function u(t){return~t.indexOf(".")?"d":"f"}function d(t,a){var i="<"+(a.prefix||""),n=i+t.n+T++;return a.partials[n]={name:t.n,partials:{}},a.code+='t.b(t.rp("'+c(n)+'",c,p,"'+(t.indent||"")+'"));',n}function p(t,a){a.code+="t.b(t.t(t."+u(t.n)+'("'+c(t.n)+'",c,p,0)));'}function h(t){return"t.b("+t+");"}var g=/\S/,f=/\"/g,m=/\n/g,b=/\r/g,v=/\\/g,x=/\u2028/,y=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(e,s){function o(){v.length>0&&(x.push({tag:"_t",text:new String(v)}),v="")}function r(){for(var a=!0,i=T;i<x.length;i++)if(a=t.tags[x[i].tag]<t.tags._v||"_t"==x[i].tag&&null===x[i].text.match(g),!a)return!1;return a}function l(t,a){if(o(),t&&r())for(var i,n=T;n<x.length;n++)x[n].text&&((i=x[n+1])&&">"==i.tag&&(i.indent=x[n].text.toString()),x.splice(n,1));else a||x.push({tag:"\n"});y=!1,T=x.length}function c(t,a){var n="="+j,e=t.indexOf(n,a),s=i(t.substring(t.indexOf("=",a)+1,e)).split(" ");return L=s[0],j=s[s.length-1],e+n.length-1}var u=e.length,d=0,p=1,h=2,f=d,m=null,b=null,v="",x=[],y=!1,w=0,T=0,L="{{",j="}}";for(s&&(s=s.split(" "),L=s[0],j=s[1]),w=0;u>w;w++)f==d?n(L,e,w)?(--w,o(),f=p):"\n"==e.charAt(w)?l(y):v+=e.charAt(w):f==p?(w+=L.length-1,b=t.tags[e.charAt(w+1)],m=b?e.charAt(w+1):"_v","="==m?(w=c(e,w),f=d):(b&&w++,f=h),y=w):n(j,e,w)?(x.push({tag:m,n:i(v),otag:L,ctag:j,i:"/"==m?y-L.length:w+j.length}),v="",w+=j.length-1,f=d,"{"==m&&("}}"==j?w++:a(x[x.length-1]))):v+=e.charAt(w);return l(y,!0),x};var w={_t:!0,"\n":!0,$:!0,"/":!0};t.stringify=function(a,i,n){return"{code: function (c,p,i) { "+t.wrapMain(a.code)+" },"+l(a)+"}"};var T=0;t.generate=function(a,i,n){T=0;var e={code:"",subs:{},partials:{}};return t.walk(a,e),n.asString?this.stringify(e,i,n):this.makeTemplate(e,i,n)},t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(t,a,i){var n=this.makePartials(t);return n.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(n,a,this,i)},t.makePartials=function(t){var a,i={subs:{},partials:t.partials,name:t.name};for(a in i.partials)i.partials[a]=this.makePartials(i.partials[a]);for(a in t.subs)i.subs[a]=new Function("c","p","t","i",t.subs[a]);return i},t.codegen={"#":function(a,i){i.code+="if(t.s(t."+u(a.n)+'("'+c(a.n)+'",c,p,1),c,p,0,'+a.i+","+a.end+',"'+a.otag+" "+a.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(a.nodes,i),i.code+="});c.pop();}"},"^":function(a,i){i.code+="if(!t.s(t."+u(a.n)+'("'+c(a.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(a.nodes,i),i.code+="};"},">":d,"<":function(a,i){var n={partials:{},code:"",subs:{},inPartial:!0};t.walk(a.nodes,n);var e=i.partials[d(a,i)];e.subs=n.subs,e.partials=n.partials},$:function(a,i){var n={subs:{},code:"",partials:i.partials,prefix:a.n};t.walk(a.nodes,n),i.subs[a.n]=n.code,i.inPartial||(i.code+='t.sub("'+c(a.n)+'",c,p,i);')},"\n":function(t,a){a.code+=h('"\\n"'+(t.last?"":" + i"))},_v:function(t,a){a.code+="t.b(t.v(t."+u(t.n)+'("'+c(t.n)+'",c,p,0)));'},_t:function(t,a){a.code+=h('"'+c(t.text)+'"')},"{":p,"&":p},t.walk=function(a,i){for(var n,e=0,s=a.length;s>e;e++)n=t.codegen[a[e].tag],n&&n(a[e],i);return i},t.parse=function(t,a,i){return i=i||{},e(t,"",[],i.sectionTags||[])},t.cache={},t.cacheKey=function(t,a){return[t,!!a.asString,!!a.disableLambda,a.delimiters,!!a.modelGet].join("||")},t.compile=function(a,i){i=i||{};var n=t.cacheKey(a,i),e=this.cache[n];if(e){var s=e.partials;for(var o in s)delete s[o].instance;return e}return e=this.generate(this.parse(this.scan(a,i.delimiters),a,i),a,i),this.cache[n]=e}}("undefined"!=typeof i?i:Hogan)},{}],2:[function(t,a,i){var n=t("./compiler");n.Template=t("./template").Template,n.template=n.Template,a.exports=n},{"./compiler":1,"./template":3}],3:[function(t,a,i){var n={};!function(t){function a(t,a,i){var n;return a&&"object"==typeof a&&(void 0!==a[t]?n=a[t]:i&&a.get&&"function"==typeof a.get&&(n=a.get(t))),n}function i(t,a,i,n,e,s){function o(){}function r(){}o.prototype=t,r.prototype=t.subs;var l,c=new o;c.subs=new r,c.subsText={},c.buf="",n=n||{},c.stackSubs=n,c.subsText=s;for(l in a)n[l]||(n[l]=a[l]);for(l in n)c.subs[l]=n[l];e=e||{},c.stackPartials=e;for(l in i)e[l]||(e[l]=i[l]);for(l in e)c.partials[l]=e[l];return c}function n(t){return String(null===t||void 0===t?"":t)}function e(t){return t=n(t),u.test(t)?t.replace(s,"&amp;").replace(o,"&lt;").replace(r,"&gt;").replace(l,"&#39;").replace(c,"&quot;"):t}t.Template=function(t,a,i,n){t=t||{},this.r=t.code||this.r,this.c=i,this.options=n||{},this.text=a||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(t,a,i){return""},v:e,t:n,render:function(t,a,i){return this.ri([t],a||{},i)},ri:function(t,a,i){return this.r(t,a,i)},ep:function(t,a){var n=this.partials[t],e=a[n.name];if(n.instance&&n.base==e)return n.instance;if("string"==typeof e){if(!this.c)throw new Error("No compiler available.");e=this.c.compile(e,this.options)}if(!e)return null;if(this.partials[t].base=e,n.subs){a.stackText||(a.stackText={});for(key in n.subs)a.stackText[key]||(a.stackText[key]=void 0!==this.activeSub&&a.stackText[this.activeSub]?a.stackText[this.activeSub]:this.text);e=i(e,n.subs,n.partials,this.stackSubs,this.stackPartials,a.stackText)}return this.partials[t].instance=e,e},rp:function(t,a,i,n){var e=this.ep(t,i);return e?e.ri(a,i,n):""},rs:function(t,a,i){var n=t[t.length-1];if(!d(n))return void i(t,a,this);for(var e=0;e<n.length;e++)t.push(n[e]),i(t,a,this),t.pop()},s:function(t,a,i,n,e,s,o){var r;return d(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ms(t,a,i,n,e,s,o)),r=!!t,!n&&r&&a&&a.push("object"==typeof t?t:a[a.length-1]),r)},d:function(t,i,n,e){var s,o=t.split("."),r=this.f(o[0],i,n,e),l=this.options.modelGet,c=null;if("."===t&&d(i[i.length-2]))r=i[i.length-1];else for(var u=1;u<o.length;u++)s=a(o[u],r,l),void 0!==s?(c=r,r=s):r="";return e&&!r?!1:(e||"function"!=typeof r||(i.push(c),r=this.mv(r,i,n),i.pop()),r)},f:function(t,i,n,e){for(var s=!1,o=null,r=!1,l=this.options.modelGet,c=i.length-1;c>=0;c--)if(o=i[c],s=a(t,o,l),void 0!==s){r=!0;break}return r?(e||"function"!=typeof s||(s=this.mv(s,i,n)),s):e?!1:""},ls:function(t,a,i,e,s){var o=this.options.delimiters;return this.options.delimiters=s,this.b(this.ct(n(t.call(a,e)),a,i)),this.options.delimiters=o,!1},ct:function(t,a,i){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(a,i)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,a,i,n,e,s,o){var r,l=a[a.length-1],c=t.call(l);return"function"==typeof c?n?!0:(r=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,l,i,r.substring(e,s),o)):c},mv:function(t,a,i){var e=a[a.length-1],s=t.call(e);return"function"==typeof s?this.ct(n(s.call(e)),e,i):s},sub:function(t,a,i,n){var e=this.subs[t];e&&(this.activeSub=t,e(a,i,this,n),this.activeSub=!1)}};var s=/&/g,o=/</g,r=/>/g,l=/\'/g,c=/\"/g,u=/[&<>\"\']/,d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof i?i:n)},{}],4:[function(t,a,i){a.exports=function(){"use strict";return{bgColour:["#B8D430","#3AB745","#029990","#3501CB","#2E2C75","#673A7E","#CC0071","#F80120","#F35B20","#FB9A00","#FFCC00","#FEF200"],fontColour:["#333","#333","#333","#FFF","#FFF","#FFF","#FFF","#333","#333","#333","#333","#333"]}}()},{}],5:[function(t,a,i){a.exports=function(){"use strict";return[{name:"Wendy's",lat:"",lng:"",vicinity:""},{name:"McDonalds",lat:"",lng:"",vicinity:""},{name:"Chick-fil-a",lat:"",lng:"",vicinity:""},{name:"Five Guys",lat:"",lng:"",vicinity:""},{name:"Gold Star",lat:"",lng:"",vicinity:""},{name:"La Mexicana",lat:"",lng:"",vicinity:""},{name:"Chipotle",lat:"",lng:"",vicinity:""},{name:"Tazza Mia",lat:"",lng:"",vicinity:""},{name:"Panera",lat:"",lng:"",vicinity:""},{name:"Just Crepes",lat:"",lng:"",vicinity:""},{name:"Arby's",lat:"",lng:"",vicinity:""},{name:"Indian",lat:"",lng:"",vicinity:""}]}()},{}],6:[function(t,a,i){!function(){"use strict";window.WOL=t("./wheel-of-lunch.js");t("./pages/global.js"),t("./pages/main.js")}()},{"./pages/global.js":17,"./pages/main.js":18,"./wheel-of-lunch.js":19}],7:[function(t,a,i){a.exports=function(a){"use strict";function i(){this.elems={id:e,root:null},this.init()}var n=t("../../templates/localisation-error.html"),e="#localisation-error",s="#localisation-continue-button";return i.prototype.init=function(){this.addWindow()},i.prototype.addWindow=function(){a("body").prepend(n),this.elems.root=a(e),this.addEvents()},i.prototype.closeWindow=function(){this.elems.root.remove()},i.prototype.addEvents=function(){var t=this;a(s).on("click",function(){t.closeWindow()})},i}(jQuery)},{"../../templates/localisation-error.html":20}],8:[function(t,a,i){a.exports=function(a){"use strict";function i(){this.elems={id:s,root:null},this.init()}var n=t("../modules/geolocation.js"),e=t("../../templates/localisation-loading.html"),s="#geolocation";return i.prototype.init=function(){this.addWindow()},i.prototype.addWindow=function(){a("body").prepend(e),this.elems.root=a(s),this.getLocation()},i.prototype.closeWindow=function(){this.elems.root.remove()},i.prototype.getLocation=function(){var t=this;WOL.app.geolocation=new n(function(){t.closeWindow()})},i}(jQuery)},{"../../templates/localisation-loading.html":21,"../modules/geolocation.js":13}],9:[function(t,a,i){a.exports=function(a){"use strict";function i(){this.elems={id:o,root:null},this.init()}var n=t("./geolocationLightbox.js"),e=t("./mapLightbox.js"),s=t("../../templates/localisation.html"),o="#localisation",r="#location-option-current",l="#location-option-find";return i.prototype.init=function(){this.addWindow()},i.prototype.addWindow=function(){a("body").prepend(s),this.elems.root=a(o),this.addEvents()},i.prototype.closeWindow=function(){this.elems.root.remove()},i.prototype.addEvents=function(){var t=this;a(r).on("click",function(){t.showCurrentLocationLightbox(),t.closeWindow()}),a(l).on("click",function(){t.showFindLocationLightbox(),t.closeWindow()})},i.prototype.showCurrentLocationLightbox=function(){WOL.app.lightbox.Geolocation=new n},i.prototype.showFindLocationLightbox=function(){WOL.app.lightbox.Map=new e},i}(jQuery)},{"../../templates/localisation.html":22,"./geolocationLightbox.js":8,"./mapLightbox.js":10}],10:[function(t,a,i){a.exports=function(){"use strict";function t(){}return t}()},{}],11:[function(t,a,i){a.exports=function(){"use strict";function a(t){this.elems={id:n,root:null},this.restaurant=t,this.init()}var i=t("../../templates/result.mustache"),n="#result",e="#result .close";return a.prototype.init=function(){"undefined"==typeof this.restaurant.rating&&(this.restaurant.rating="Unavailable"),this.restaurant.href=this.buildHref(),this.addWindow()},a.prototype.addWindow=function(){$("body").prepend(i.render({title:this.restaurant.name,vicinity:this.restaurant.vicinity,rating:this.restaurant.rating,href:this.restaurant.href})),this.elems.root=$(n),this.addEvents()},a.prototype.closeWindow=function(){this.elems.root.remove()},a.prototype.addEvents=function(){var t=this;$(e).on("click",function(){t.closeWindow()})},a.prototype.buildHref=function(){var t=this.restaurant.name.split(" ").join("+"),a="http://maps.google.com/maps/dir/",i=WOL.app.geolocation.position.latitude+","+WOL.app.geolocation.position.longitude;return a+i+"/"+t+","+this.restaurant.vicinity+"/@"+this.restaurant.lat+","+this.restaurant.lng},a}()},{"../../templates/result.mustache":23}],12:[function(t,a,i){a.exports=function(){"use strict"}()},{}],13:[function(t,a,i){a.exports=function(){"use strict";function a(t){this.callback=t,this.position={},this.options={enableHighAccuracy:!0,maximumAge:0},this.getLocation()}var i=t("./places.js"),n=t("../lightboxes/errorLocationLightbox.js");return a.prototype.getLocation=function(){navigator.geolocation.getCurrentPosition(this.success,this.error,this.options)},a.prototype.success=function(t){WOL.app.geolocation.position=t.coords,WOL.app.places=new i({latitude:WOL.app.geolocation.position.latitude,longitude:WOL.app.geolocation.position.longitude}),WOL.app.geolocation.callback()},a.prototype.error=function(t){WOL.app.geolocation.callback(),WOL.app.lightbox.NoLocationLightbox=new n},a.prototype.closeParentWindow=function(){this.elems.parentRoot.remove()},a}()},{"../lightboxes/errorLocationLightbox.js":7,"./places.js":15}],14:[function(t,a,i){arguments[4][12][0].apply(i,arguments)},{dup:12}],15:[function(t,a,i){a.exports=function(){"use strict";function t(t){this.options={radius:300,radiusIncrement:50,placeType:"restaurant",maxPlaces:12,initialPlaces:12},this.userOptions=t,this.restaurants={},this.init(),this.getPlaces(this.options)}var a="http://www.jack-palmer.co.uk/wheel/api/getPlaces/";return t.prototype.init=function(){"undefined"!=typeof this.userOptions.latitude&&(this.options.latitude=this.userOptions.latitude),"undefined"!=typeof this.userOptions.longitude&&(this.options.longitude=this.userOptions.longitude),"undefined"!=typeof this.userOptions.radius&&(this.options.radius=this.userOptions.radius),"undefined"!=typeof this.userOptions.placeType&&(this.options.placeType=this.userOptions.placeType),"undefined"!=typeof this.userOptions.maxPlaces&&(this.options.maxPlaces=this.userOptions.maxPlaces)},t.prototype.getPlaces=function(t){var i=this;$.getJSON(a+this.buildQueryParams(),function(a){return 0===a.length?void i.error():void(a.length<t.initialPlaces&&t.radius<3e3?i.expandSearchRadius(a,t):i.success(a))})},t.prototype.buildQueryParams=function(){return"?latitude="+this.options.latitude+"&longitude="+this.options.longitude+"&radius="+this.options.radius+"&type="+this.options.placeType+"&maxplaces="+this.options.maxPlaces+"&minPrice=0&maxPrice=4"},t.prototype.expandSearchRadius=function(t,a){a.radius>300&&(a.radiusIncrement=100),a.radius>1e3&&(a.radiusIncrement=500),self.getPlaces({latitude:a.latitude,longitude:a.longitude,radius:parseInt(a.radius)+a.radiusIncrement,placeType:a.placeType,maxPlaces:a.maxPlaces})},t.prototype.success=function(t){this.restaurants=t,this.options.initialPlaces=0,WOL.app.wheel.setRestaurants(t),WOL.app.wheel.draw()},t.prototype.error=function(t){WOL.app.lightbox.NoLocationLightbox=new ErrorLocationLightbox},t}()},{}],16:[function(t,a,i){a.exports=function(){"use strict";function a(t){var a=document.getElementById(t),i=$("#"+t);this.elems={selector:"#"+t,canvas:a,$canvas:i},a.getContext&&(this.data={canvas:a,restaurants:n,width:600,height:600,startAngle:0,spinTimeout:null,isSpinning:!1,spinArcStart:10,spinTime:0,spinTimeTotal:0,spinVelocity:2e3,ctx:null,rouletteWheel:{},outsideRadius:250,textRadius:194,insideRadius:150,angle:null,text:null,drag:{clickedX:null,clickedY:null,currentDragX:null,currentDragY:null,previousDragX:null,previousDragY:null,isDragging:null,changedAngle:null,arcAngle:null}},this.init())}var i=t("../data/colours.js"),n=t("../data/restaurants.js"),e=t("../lightboxes/resultLightbox.js"),s=(t("./confetti.js"),"#spin");return a.prototype.init=function(){this.data.ctx=this.data.canvas.getContext("2d"),this.data.ctx.clearRect(0,0,this.data.width,this.data.height),this.data.ctx.strokeStyle="black",this.data.ctx.font="12px Helvetica, Arial",this.data.arc=Math.PI/(this.data.restaurants.length/2),this.draw(),this.addEvents()},a.prototype.addEvents=function(){var t=this;$(s).on("click",function(){t.retIsSpinning()||t.spin(!0)}),$(this.elems.selector).mousedown(function(a){t.data.drag.clickedX=a.pageX,t.data.drag.clickedY=a.pageY,t.data.drag.previousDragX=a.pageX,t.data.drag.previousDragY=a.pageY,t.data.drag.isDragging=!0}),$(this.elems.selector).mousemove(function(a){t.data.drag.isDragging&&!t.retIsSpinning()&&(t.data.drag.currentDragX=a.pageX,t.data.drag.currentDragY=a.pageY,t.data.drag.changedAngle=Math.atan2(t.data.drag.currentDragY-$(s).position().top,t.data.drag.currentDragX-$(s).position().left),t.data.drag.changedAngle-=Math.atan2(t.data.drag.previousDragY-$(s).position().top,t.data.drag.previousDragX-$(s).position().left),t.data.drag.arcAngle=Math.atan2(t.data.drag.currentDragY-$(s).position().top,t.data.drag.currentDragX-$(s).position().left),t.data.drag.arcAngle-=Math.atan2(t.data.drag.clickedY-$(s).position().top,t.data.drag.clickedX-$(s).position().left),t.addToStartAngle(t.data.drag.changedAngle),t.draw(!0),t.data.drag.previousDragY=t.data.drag.currentDragY,t.data.drag.previousDragX=t.data.drag.currentDragX)}),$(this.elems.selector).mouseup(function(a){t.data.drag.arcAngle>=.5&&!t.retIsSpinning()&&t.data.drag.changedAngle>0?t.spin(!0):t.data.drag.arcAngle<-4&&!t.retIsSpinning()&&t.data.drag.changedAngle>0?t.spin(!0):t.data.drag.arcAngle<=-.5&&!t.retIsSpinning()&&t.data.drag.changedAngle<0?t.spin(!1):t.data.drag.arcAngle>4&&!t.retIsSpinning()&&t.data.drag.changedAngle<0&&t.spin(!1),t.data.drag.isDragging=!1}),$(this.elems.selector).mouseout(function(a){t.data.drag.isDragging=!1})},a.prototype.draw=function(){var t=this;this.data.ctx.clearRect(0,0,this.data.width,this.data.height),this.data.restaurants.forEach(function(a,n){t.data.angle=t.data.startAngle+n*t.data.arc,t.data.ctx.fillStyle=i.bgColour[n],t.data.ctx.beginPath(),t.data.ctx.arc(t.data.width/2,t.data.height/2,t.data.outsideRadius,t.data.angle,t.data.angle+t.data.arc,!1),t.data.ctx.arc(t.data.width/2,t.data.height/2,t.data.insideRadius,t.data.angle+t.data.arc,t.data.angle,!0),t.data.ctx.fill(),t.data.ctx.save(),t.data.ctx.fillStyle=i.fontColour[n],t.data.ctx.translate(t.data.width/2+Math.cos(t.data.angle+t.data.arc/2)*t.data.textRadius,t.data.height/2+Math.sin(t.data.angle+t.data.arc/2)*t.data.textRadius),t.data.ctx.rotate(t.data.angle+t.data.arc/2+Math.PI/2),t.printName(a.name,-t.data.ctx.measureText(a.name).width/2,0,14,2*Math.PI*t.data.textRadius/t.data.restaurants.length-10),t.data.ctx.restore()}),this.drawArrow()},a.prototype.drawArrow=function(){this.data.ctx.fillStyle="#333",this.data.ctx.beginPath(),this.data.ctx.moveTo(this.data.width/2-4,this.data.height/2-(this.data.outsideRadius+25)),this.data.ctx.lineTo(this.data.width/2+4,this.data.height/2-(this.data.outsideRadius+25)),this.data.ctx.lineTo(this.data.width/2+4,this.data.height/2-(this.data.outsideRadius+15)),this.data.ctx.lineTo(this.data.width/2+9,this.data.height/2-(this.data.outsideRadius+15)),this.data.ctx.lineTo(this.data.width/2+0,this.data.height/2-(this.data.outsideRadius-0)),this.data.ctx.lineTo(this.data.width/2-9,this.data.height/2-(this.data.outsideRadius+15)),this.data.ctx.lineTo(this.data.width/2-4,this.data.height/2-(this.data.outsideRadius+15)),this.data.ctx.lineTo(this.data.width/2-4,this.data.height/2-(this.data.outsideRadius+25)),this.data.ctx.fill()},a.prototype.spin=function(t){this.data.spinAngleStart=10*Math.random()+10,this.data.spinTime=0,this.data.spinTimeTotal=3*Math.random()+4*this.data.spinVelocity,!this.data.isSpinning&&t?(this.data.isSpinning=!0,this.rotate(!0)):this.data.isSpinning||t||(this.data.isSpinning=!0,this.rotate(!1))},a.prototype.retIsSpinning=function(){return this.data.isSpinning},a.prototype.addToStartAngle=function(t){this.data.startAngle+=t},a.prototype.rotate=function(t){var a=this;if(this.data.spinTime+=30,this.data.spinTime>=this.data.spinTimeTotal)return this.stopRotate(),void(this.data.isSpinning=!1);var i=this.data.spinAngleStart-this.easeOut(this.data.spinTime,0,this.data.spinAngleStart,this.data.spinTimeTotal);t?this.data.startAngle+=i*Math.PI/180:this.data.startAngle-=i*Math.PI/180,this.draw(),this.data.spinTimeout=setTimeout(function(){a.rotate(t)},30)},a.prototype.stopRotate=function(){clearTimeout(this.data.spinTimeout);var t=180*this.data.startAngle/Math.PI+90,a=180*this.data.arc/Math.PI,i=Math.floor((360-t%360)/a);this.data.ctx.save(),0>t&&(t=Math.abs(t),i=Math.floor(t%360/a)),WOL.app.lightbox.result=new e(this.data.restaurants[i]),this.data.ctx.restore()},a.prototype.printName=function(t,a,i,n,e){var s,o,r,l,c;if(e=e||0,0>=e)return void this.data.ctx.fillText(t,a,i);for(c=1;c<=t.length;c++)if(s=t.substr(0,c),this.data.ctx.measureText(s).width>e)return o=" "!=t.charAt(c-2)?"-":"",r=t.substr(0,c-1)+o,l=t.substr(c-1),this.data.ctx.fillText(r,-this.data.ctx.measureText(r).width/2,i-n),void this.printName(l,-this.data.ctx.measureText(l).width/2,i+n,n,e-10);this.data.ctx.fillText(t,a,i?i-n:i)},a.prototype.easeOut=function(t,a,i,n){var e=(t/=n)*t,s=e*t;return a+i*(s+-3*e+3*t)},a.prototype.setRestaurants=function(t){this.data.restaurants=t,this.data.arc=Math.PI/(this.data.restaurants.length/2)},a}()},{"../data/colours.js":4,"../data/restaurants.js":5,"../lightboxes/resultLightbox.js":11,"./confetti.js":12}],17:[function(t,a,i){a.exports=function(t){"use strict"}()},{}],18:[function(t,a,i){a.exports=function(){"use strict";{var a=t("../modules/wheel.js"),i=t("../lightboxes/localisationLightbox.js");t("../modules/map.js"),t("../modules/geolocation.js"),t("../modules/confetti.js")}WOL.app.wheel=new a("wheel"),WOL.app.lightbox.localisation=new i}()},{"../lightboxes/localisationLightbox.js":9,"../modules/confetti.js":12,"../modules/geolocation.js":13,"../modules/map.js":14,"../modules/wheel.js":16}],19:[function(t,a,i){a.exports={app:{lightbox:{}},modules:{},global:{},page:{},utils:{},data:{}}},{}],20:[function(t,a,i){a.exports='<div id="localisation-error" class="alert alert-danger localisation" role="alert"><p>Oops! We can\'t find your location. <button id="localisation-continue-button" type="button" class="btn btn-danger btn-sm"> Continue anyway</button></p></div>'},{}],21:[function(t,a,i){a.exports='<div id="geolocation" class="panel panel-default localisation search-localisation"><div class="panel-body"><p>Hang on a moment, we are just getting your location<span class="one">.</span><span class="two">.</span><span class="three">.</span></p></div></div>'},{}],22:[function(t,a,i){a.exports='<div id="localisation" class="panel panel-default select-localisation"><div class="panel-body"><p>Please select an option</p> <button type="button" id="location-option-current" class="btn btn-success">Use my location</button> <button type="button" id="location-option-find" class="btn btn-info">Find a location</button></div></div>'},{}],23:[function(t,a,i){var n=t("hogan.js");a.exports=new n.Template({code:function(t,a,i){var n=this;return n.b(i=i||""),n.b('<div id="result" class="panel panel-default result">\r'),n.b("\n"+i),n.b('  <div class="panel-body">\r'),n.b("\n"+i),n.b('    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r'),n.b("\n"+i),n.b("    <h2>"),n.b(n.v(n.f("title",t,a,0))),n.b("</h2>\r"),n.b("\n"+i),n.b('    <p class="vicinity">'),n.b(n.v(n.f("vicinity",t,a,0))),n.b("</p>\r"),n.b("\n"+i),n.b('    <p class="rating">Rating: '),n.b(n.v(n.f("rating",t,a,0))),n.b("</p>\r"),n.b("\n"+i),n.b("    <p>\r"),n.b("\n"+i),n.b('      <a class="map" target="_blank" href="'),n.b(n.v(n.f("href",t,a,0))),n.b('">View on map</a>\r'),n.b("\n"+i),n.b("    </p>\r"),n.b("\n"+i),n.b("  </div>\r"),n.b("\n"+i),n.b("</div>\r"),n.b("\n"),n.fl()},partials:{},subs:{}},'<div id="result" class="panel panel-default result">\r\n  <div class="panel-body">\r\n    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n    <h2>{{title}}</h2>\r\n    <p class="vicinity">{{vicinity}}</p>\r\n    <p class="rating">Rating: {{rating}}</p>\r\n    <p>\r\n      <a class="map" target="_blank" href="{{href}}">View on map</a>\r\n    </p>\r\n  </div>\r\n</div>\r\n',n)},{"hogan.js":2}]},{},[6]);
//# sourceMappingURL=../maps/all.js.map