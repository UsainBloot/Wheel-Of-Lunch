!function t(a,i,n){function e(o,r){if(!i[o]){if(!a[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var p=i[o]={exports:{}};a[o][0].call(p.exports,function(t){var i=a[o][1][t];return e(i?i:t)},p,p.exports,t,a,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)e(n[o]);return e}({1:[function(t,a,i){!function(t){function a(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function i(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function n(t,a,i){if(a.charAt(i)!=t.charAt(0))return!1;for(var n=1,e=t.length;e>n;n++)if(a.charAt(i+n)!=t.charAt(n))return!1;return!0}function e(a,i,n,r){var l=[],c=null,p=null,u=null;for(p=n[n.length-1];a.length>0;){if(u=a.shift(),p&&"<"==p.tag&&!(u.tag in w))throw new Error("Illegal content in < super tag.");if(t.tags[u.tag]<=t.tags.$||s(u,r))n.push(u),u.nodes=e(a,u.tag,n,r);else{if("/"==u.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+u.n);if(c=n.pop(),u.n!=c.n&&!o(u.n,c.n,r))throw new Error("Nesting error: "+c.n+" vs. "+u.n);return c.end=u.i,l}"\n"==u.tag&&(u.last=0==a.length||"\n"==a[0].tag)}l.push(u)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return l}function s(t,a){for(var i=0,n=a.length;n>i;i++)if(a[i].o==t.n)return t.tag="#",!0}function o(t,a,i){for(var n=0,e=i.length;e>n;n++)if(i[n].c==t&&i[n].o==a)return!0}function r(t){var a=[];for(var i in t)a.push('"'+c(i)+'": function(c,p,t,i) {'+t[i]+"}");return"{ "+a.join(",")+" }"}function l(t){var a=[];for(var i in t.partials)a.push('"'+c(i)+'":{name:"'+c(t.partials[i].name)+'", '+l(t.partials[i])+"}");return"partials: {"+a.join(",")+"}, subs: "+r(t.subs)}function c(t){return t.replace(b,"\\\\").replace(f,'\\"').replace(m,"\\n").replace(v,"\\r").replace(y,"\\u2028").replace(x,"\\u2029")}function p(t){return~t.indexOf(".")?"d":"f"}function u(t,a){var i="<"+(a.prefix||""),n=i+t.n+L++;return a.partials[n]={name:t.n,partials:{}},a.code+='t.b(t.rp("'+c(n)+'",c,p,"'+(t.indent||"")+'"));',n}function d(t,a){a.code+="t.b(t.t(t."+p(t.n)+'("'+c(t.n)+'",c,p,0)));'}function h(t){return"t.b("+t+");"}var g=/\S/,f=/\"/g,m=/\n/g,v=/\r/g,b=/\\/g,y=/\u2028/,x=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(e,s){function o(){b.length>0&&(y.push({tag:"_t",text:new String(b)}),b="")}function r(){for(var a=!0,i=L;i<y.length;i++)if(a=t.tags[y[i].tag]<t.tags._v||"_t"==y[i].tag&&null===y[i].text.match(g),!a)return!1;return a}function l(t,a){if(o(),t&&r())for(var i,n=L;n<y.length;n++)y[n].text&&((i=y[n+1])&&">"==i.tag&&(i.indent=y[n].text.toString()),y.splice(n,1));else a||y.push({tag:"\n"});x=!1,L=y.length}function c(t,a){var n="="+T,e=t.indexOf(n,a),s=i(t.substring(t.indexOf("=",a)+1,e)).split(" ");return k=s[0],T=s[s.length-1],e+n.length-1}var p=e.length,u=0,d=1,h=2,f=u,m=null,v=null,b="",y=[],x=!1,w=0,L=0,k="{{",T="}}";for(s&&(s=s.split(" "),k=s[0],T=s[1]),w=0;p>w;w++)f==u?n(k,e,w)?(--w,o(),f=d):"\n"==e.charAt(w)?l(x):b+=e.charAt(w):f==d?(w+=k.length-1,v=t.tags[e.charAt(w+1)],m=v?e.charAt(w+1):"_v","="==m?(w=c(e,w),f=u):(v&&w++,f=h),x=w):n(T,e,w)?(y.push({tag:m,n:i(b),otag:k,ctag:T,i:"/"==m?x-k.length:w+T.length}),b="",w+=T.length-1,f=u,"{"==m&&("}}"==T?w++:a(y[y.length-1]))):b+=e.charAt(w);return l(x,!0),y};var w={_t:!0,"\n":!0,$:!0,"/":!0};t.stringify=function(a,i,n){return"{code: function (c,p,i) { "+t.wrapMain(a.code)+" },"+l(a)+"}"};var L=0;t.generate=function(a,i,n){L=0;var e={code:"",subs:{},partials:{}};return t.walk(a,e),n.asString?this.stringify(e,i,n):this.makeTemplate(e,i,n)},t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(t,a,i){var n=this.makePartials(t);return n.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(n,a,this,i)},t.makePartials=function(t){var a,i={subs:{},partials:t.partials,name:t.name};for(a in i.partials)i.partials[a]=this.makePartials(i.partials[a]);for(a in t.subs)i.subs[a]=new Function("c","p","t","i",t.subs[a]);return i},t.codegen={"#":function(a,i){i.code+="if(t.s(t."+p(a.n)+'("'+c(a.n)+'",c,p,1),c,p,0,'+a.i+","+a.end+',"'+a.otag+" "+a.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(a.nodes,i),i.code+="});c.pop();}"},"^":function(a,i){i.code+="if(!t.s(t."+p(a.n)+'("'+c(a.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(a.nodes,i),i.code+="};"},">":u,"<":function(a,i){var n={partials:{},code:"",subs:{},inPartial:!0};t.walk(a.nodes,n);var e=i.partials[u(a,i)];e.subs=n.subs,e.partials=n.partials},$:function(a,i){var n={subs:{},code:"",partials:i.partials,prefix:a.n};t.walk(a.nodes,n),i.subs[a.n]=n.code,i.inPartial||(i.code+='t.sub("'+c(a.n)+'",c,p,i);')},"\n":function(t,a){a.code+=h('"\\n"'+(t.last?"":" + i"))},_v:function(t,a){a.code+="t.b(t.v(t."+p(t.n)+'("'+c(t.n)+'",c,p,0)));'},_t:function(t,a){a.code+=h('"'+c(t.text)+'"')},"{":d,"&":d},t.walk=function(a,i){for(var n,e=0,s=a.length;s>e;e++)n=t.codegen[a[e].tag],n&&n(a[e],i);return i},t.parse=function(t,a,i){return i=i||{},e(t,"",[],i.sectionTags||[])},t.cache={},t.cacheKey=function(t,a){return[t,!!a.asString,!!a.disableLambda,a.delimiters,!!a.modelGet].join("||")},t.compile=function(a,i){i=i||{};var n=t.cacheKey(a,i),e=this.cache[n];if(e){var s=e.partials;for(var o in s)delete s[o].instance;return e}return e=this.generate(this.parse(this.scan(a,i.delimiters),a,i),a,i),this.cache[n]=e}}("undefined"!=typeof i?i:Hogan)},{}],2:[function(t,a,i){var n=t("./compiler");n.Template=t("./template").Template,n.template=n.Template,a.exports=n},{"./compiler":1,"./template":3}],3:[function(t,a,i){var n={};!function(t){function a(t,a,i){var n;return a&&"object"==typeof a&&(void 0!==a[t]?n=a[t]:i&&a.get&&"function"==typeof a.get&&(n=a.get(t))),n}function i(t,a,i,n,e,s){function o(){}function r(){}o.prototype=t,r.prototype=t.subs;var l,c=new o;c.subs=new r,c.subsText={},c.buf="",n=n||{},c.stackSubs=n,c.subsText=s;for(l in a)n[l]||(n[l]=a[l]);for(l in n)c.subs[l]=n[l];e=e||{},c.stackPartials=e;for(l in i)e[l]||(e[l]=i[l]);for(l in e)c.partials[l]=e[l];return c}function n(t){return String(null===t||void 0===t?"":t)}function e(t){return t=n(t),p.test(t)?t.replace(s,"&amp;").replace(o,"&lt;").replace(r,"&gt;").replace(l,"&#39;").replace(c,"&quot;"):t}t.Template=function(t,a,i,n){t=t||{},this.r=t.code||this.r,this.c=i,this.options=n||{},this.text=a||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(t,a,i){return""},v:e,t:n,render:function(t,a,i){return this.ri([t],a||{},i)},ri:function(t,a,i){return this.r(t,a,i)},ep:function(t,a){var n=this.partials[t],e=a[n.name];if(n.instance&&n.base==e)return n.instance;if("string"==typeof e){if(!this.c)throw new Error("No compiler available.");e=this.c.compile(e,this.options)}if(!e)return null;if(this.partials[t].base=e,n.subs){a.stackText||(a.stackText={});for(key in n.subs)a.stackText[key]||(a.stackText[key]=void 0!==this.activeSub&&a.stackText[this.activeSub]?a.stackText[this.activeSub]:this.text);e=i(e,n.subs,n.partials,this.stackSubs,this.stackPartials,a.stackText)}return this.partials[t].instance=e,e},rp:function(t,a,i,n){var e=this.ep(t,i);return e?e.ri(a,i,n):""},rs:function(t,a,i){var n=t[t.length-1];if(!u(n))return void i(t,a,this);for(var e=0;e<n.length;e++)t.push(n[e]),i(t,a,this),t.pop()},s:function(t,a,i,n,e,s,o){var r;return u(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ms(t,a,i,n,e,s,o)),r=!!t,!n&&r&&a&&a.push("object"==typeof t?t:a[a.length-1]),r)},d:function(t,i,n,e){var s,o=t.split("."),r=this.f(o[0],i,n,e),l=this.options.modelGet,c=null;if("."===t&&u(i[i.length-2]))r=i[i.length-1];else for(var p=1;p<o.length;p++)s=a(o[p],r,l),void 0!==s?(c=r,r=s):r="";return e&&!r?!1:(e||"function"!=typeof r||(i.push(c),r=this.mv(r,i,n),i.pop()),r)},f:function(t,i,n,e){for(var s=!1,o=null,r=!1,l=this.options.modelGet,c=i.length-1;c>=0;c--)if(o=i[c],s=a(t,o,l),void 0!==s){r=!0;break}return r?(e||"function"!=typeof s||(s=this.mv(s,i,n)),s):e?!1:""},ls:function(t,a,i,e,s){var o=this.options.delimiters;return this.options.delimiters=s,this.b(this.ct(n(t.call(a,e)),a,i)),this.options.delimiters=o,!1},ct:function(t,a,i){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(a,i)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,a,i,n,e,s,o){var r,l=a[a.length-1],c=t.call(l);return"function"==typeof c?n?!0:(r=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,l,i,r.substring(e,s),o)):c},mv:function(t,a,i){var e=a[a.length-1],s=t.call(e);return"function"==typeof s?this.ct(n(s.call(e)),e,i):s},sub:function(t,a,i,n){var e=this.subs[t];e&&(this.activeSub=t,e(a,i,this,n),this.activeSub=!1)}};var s=/&/g,o=/</g,r=/>/g,l=/\'/g,c=/\"/g,p=/[&<>\"\']/,u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof i?i:n)},{}],4:[function(t,a,i){a.exports=function(){"use strict";return{bgColour:["#B8D430","#3AB745","#029990","#3501CB","#2E2C75","#673A7E","#CC0071","#F80120","#F35B20","#FB9A00","#FFCC00","#FEF200"],fontColour:["#333","#333","#333","#FFF","#FFF","#FFF","#FFF","#333","#333","#333","#333","#333"]}}()},{}],5:[function(t,a,i){a.exports=function(){"use strict";return[{name:"Wendy's",lat:"",lng:"",vicinity:""},{name:"McDonalds",lat:"",lng:"",vicinity:""},{name:"Chick-fil-a",lat:"",lng:"",vicinity:""},{name:"Five Guys",lat:"",lng:"",vicinity:""},{name:"Gold Star",lat:"",lng:"",vicinity:""},{name:"La Mexicana",lat:"",lng:"",vicinity:""},{name:"Chipotle",lat:"",lng:"",vicinity:""},{name:"Tazza Mia",lat:"",lng:"",vicinity:""},{name:"Panera",lat:"",lng:"",vicinity:""},{name:"Just Crepes",lat:"",lng:"",vicinity:""},{name:"Arby's",lat:"",lng:"",vicinity:""},{name:"Indian",lat:"",lng:"",vicinity:""}]}()},{}],6:[function(t,a,i){a.exports=function(a){"use strict";function i(){this.elems={id:s,root:null},this.settings={placeType:"restaurant",latitude:"",longitude:"",radius:300,maxPlaces:12,shareLink:"",dynamicSearch:!1},this.URLparams=WOL.app.utilities.getURLParams(),this.init()}var n=t("../modules/places.js"),e=t("../../templates/settings.html"),s="#settings",o="#settings a.settings",r="#settings .placetype",l="#settings input.latitude",c="#settings input.longitude",p="#settings input.radius",u="#settings input.maxplaces",d="#settings input.sharelink",h="#settings-search",g="#settings input.dynamic-search";return i.prototype.init=function(){"undefined"!=typeof this.URLparams.lat&&(this.settings.latitude=this.URLparams.lat),"undefined"!=typeof this.URLparams["long"]&&(this.settings.longitude=this.URLparams["long"]),"undefined"!=typeof this.URLparams.radius&&(this.settings.radius=this.URLparams.radius),"undefined"!=typeof this.URLparams.type&&(this.settings.placeType=this.URLparams.type),"undefined"!=typeof this.URLparams.maxplaces&&(this.settings.maxPlaces=this.URLparams.maxplaces),this.elems.root=a(s),this.addWindow(),this.populate(),this.addEvents()},i.prototype.addWindow=function(){a("body").prepend(e)},i.prototype.addEvents=function(){var t=this;a(o).on("click",function(){a(".clickme").remove(),a(".settings").toggleClass("settings-open")}),a(h).on("click",function(){t.save(),WOL.app.places=new n(t.settings)})},i.prototype.populate=function(){a(r+"."+this.settings.placeType).prop("checked",!0),a(l).val(this.settings.latitude),a(c).val(this.settings.longitude),a(p).val(this.settings.radius),a(u).val(this.settings.maxPlaces),this.settings.shareLink=this.getShareLink(),a(d).val(this.settings.shareLink)},i.prototype.save=function(){this.settings.placeType=a(r+":checked").val(),this.settings.latitude=a(l).val(),this.settings.longitude=a(c).val(),this.settings.radius=a(p).val(),this.settings.maxPlaces=a(u).val(),this.settings.shareLink=this.getShareLink(),this.settings.dynamicSearch=a(g).is(":checked"),this.populate()},i.prototype.setLatLong=function(t){this.settings.latitude=t.latitude,this.settings.longitude=t.longitude,this.populate()},i.prototype.setRadius=function(t){this.settings.radius=t,this.populate()},i.prototype.getShareLink=function(){var t=window.location.origin+window.location.pathname,i={lat:this.settings.latitude,"long":this.settings.longitude,radius:this.settings.radius,type:this.settings.placeType,maxplaces:this.settings.maxPlaces};return t+"?"+a.param(i)},i}(jQuery)},{"../../templates/settings.html":26,"../modules/places.js":15}],7:[function(t,a,i){!function(){"use strict";window.WOL=t("./wheel-of-lunch.js");t("./pages/global.js"),t("./pages/main.js")}()},{"./pages/global.js":18,"./pages/main.js":19,"./wheel-of-lunch.js":20}],8:[function(t,a,i){a.exports=function(a){"use strict";function i(){this.elems={id:e,root:null},this.init()}var n=t("../../templates/localisation-error.html"),e="#localisation-error",s="#localisation-continue-button";return i.prototype.init=function(){this.addWindow()},i.prototype.addWindow=function(){a("body").prepend(n),this.elems.root=a(e),this.addEvents()},i.prototype.closeWindow=function(){this.elems.root.remove()},i.prototype.addEvents=function(){var t=this;a(s).on("click",function(){t.closeWindow()})},i}(jQuery)},{"../../templates/localisation-error.html":21}],9:[function(t,a,i){a.exports=function(a){"use strict";function i(){this.elems={id:s,root:null},this.init()}var n=t("../modules/geolocation.js"),e=t("../../templates/localisation-loading.html"),s="#geolocation";return i.prototype.init=function(){this.addWindow()},i.prototype.addWindow=function(){a("body").prepend(e),this.elems.root=a(s),this.getLocation()},i.prototype.closeWindow=function(){this.elems.root.remove(),WOL.app.utilities.unblurBackground()},i.prototype.getLocation=function(){var t=this;WOL.app.geolocation=new n(function(){t.closeWindow()})},i}(jQuery)},{"../../templates/localisation-loading.html":22,"../modules/geolocation.js":13}],10:[function(t,a,i){a.exports=function(a){"use strict";function i(){this.elems={id:o,root:null},this.isCurrentlyOpen=!1,this.init()}var n=t("./geolocationLightbox.js"),e=t("./mapLightbox.js"),s=t("../../templates/localisation.html"),o="#localisation",r="#location-option-current",l="#location-option-find";return i.prototype.init=function(){this.addWindow()},i.prototype.addWindow=function(){WOL.app.utilities.blurBackground(),a("body").prepend(s),this.elems.root=a(o),this.isCurrentlyOpen=!0,this.addEvents()},i.prototype.closeWindow=function(){this.isCurrentlyOpen=!1,this.elems.root.remove()},i.prototype.addEvents=function(){var t=this;a(r).on("click",function(){t.showCurrentLocationLightbox(),t.closeWindow()}),a(l).on("click",function(){t.showFindLocationLightbox(),t.closeWindow()})},i.prototype.showCurrentLocationLightbox=function(){WOL.app.lightbox.Geolocation=new n},i.prototype.showFindLocationLightbox=function(){WOL.app.lightbox.Map=new e},i}(jQuery)},{"../../templates/localisation.html":23,"./geolocationLightbox.js":9,"./mapLightbox.js":11}],11:[function(t,a,i){a.exports=function(a){"use strict";function i(){this.elems={id:o,root:null},this.init()}var n=t("../modules/map.js"),e=t("../modules/places.js"),s=t("../../templates/map.html"),o="#map",r="map-canvas",l="map-search",c="#map .select-location";return i.prototype.init=function(){this.addWindow(),WOL.app.Map=new n(r,l)},i.prototype.addWindow=function(){a("body").prepend(s),this.elems.root=a(o),this.addEvents()},i.prototype.closeWindow=function(){this.elems.root.remove(),WOL.app.utilities.unblurBackground()},i.prototype.addEvents=function(){var t=this;a(c).on("click",function(){WOL.app.settings.setLatLong(WOL.app.Map.position),WOL.app.places=new e({latitude:WOL.app.Map.position.latitude,longitude:WOL.app.Map.position.longitude,dynamicSearch:!0}),t.closeWindow()})},i}(jQuery)},{"../../templates/map.html":24,"../modules/map.js":14,"../modules/places.js":15}],12:[function(t,a,i){a.exports=function(a){"use strict";function i(t){this.elems={id:e,root:null},this.restaurant=t,this.init()}var n=t("../../templates/result.mustache"),e="#result",s="#result .rating",o="#result .rating-foreground",r="#result .close";return i.prototype.init=function(){this.restaurant.href=this.buildHref(),this.addWindow()},i.prototype.addWindow=function(){WOL.app.utilities.blurBackground(),a("body").prepend(n.render({title:this.restaurant.name,vicinity:this.restaurant.vicinity,rating:this.restaurant.rating,href:this.restaurant.href})),this.elems.root=a(e),this.displayRatings(),this.addEvents()},i.prototype.closeWindow=function(){this.elems.root.remove(),WOL.app.utilities.unblurBackground()},i.prototype.displayRatings=function(){"undefined"==typeof this.restaurant.rating||null===this.restaurant.rating?a(s).remove():a(o).css("width",this.restaurant.rating/5*100+"%")},i.prototype.addEvents=function(){var t=this;a(r).on("click",function(){t.closeWindow()})},i.prototype.buildHref=function(){var t=this.restaurant.name.split(" ").join("+"),a="http://maps.google.com/maps/dir/",i=WOL.app.settings.settings.latitude+","+WOL.app.settings.settings.longitude;return a+i+"/"+t+","+this.restaurant.vicinity+"/@"+this.restaurant.lat+","+this.restaurant.lng},i}(jQuery)},{"../../templates/result.mustache":25}],13:[function(t,a,i){a.exports=function(){"use strict";function a(t){this.callback=t,this.position={},this.options={enableHighAccuracy:!0,maximumAge:0},this.getLocation()}var i=t("./places.js"),n=t("../lightboxes/errorLocationLightbox.js");return a.prototype.getLocation=function(){navigator.geolocation.getCurrentPosition(this.success,this.error,this.options)},a.prototype.success=function(t){WOL.app.geolocation.position=t.coords,WOL.app.settings.setLatLong(WOL.app.geolocation.position),WOL.app.places=new i({latitude:WOL.app.geolocation.position.latitude,longitude:WOL.app.geolocation.position.longitude,dynamicSearch:!0}),WOL.app.geolocation.callback()},a.prototype.error=function(t){WOL.app.geolocation.callback(),WOL.app.lightbox.ErrorLocationLightbox=new n},a.prototype.closeParentWindow=function(){this.elems.parentRoot.remove()},a}()},{"../lightboxes/errorLocationLightbox.js":8,"./places.js":15}],14:[function(t,a,i){a.exports=function(){"use strict";function t(t,a){this.position={latitude:0,longitude:0},this.map=new google.maps.Map(document.getElementById(t),{mapTypeId:google.maps.MapTypeId.ROADMAP}),this.defaultBounds=new google.maps.LatLngBounds(new google.maps.LatLng(49.383639452689664,-17.39866406249996),new google.maps.LatLng(59.53530451232491,8.968523437500039)),this.map.fitBounds(this.defaultBounds),this.input=document.getElementById(a),this.searchBox=new google.maps.places.SearchBox(this.input),this.init()}return t.prototype.init=function(){this.addEvents()},t.prototype.addEvents=function(){this.placesChanged(),this.boundsChanged(),this.centerChanged()},t.prototype.placesChanged=function(){var t=this;google.maps.event.addListener(this.searchBox,"places_changed",function(){var a=t.searchBox.getPlaces();if(0!==a.length){for(var i,n=new google.maps.LatLngBounds,e=0;e<a.length;e++){i=a[e];{({url:i.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)})}n.extend(i.geometry.location)}t.map.fitBounds(n),1==a.length&&t.map.setZoom(16)}})},t.prototype.boundsChanged=function(){var t=this;google.maps.event.addListener(this.map,"bounds_changed",function(){var a=t.map.getBounds();t.searchBox.setBounds(a)})},t.prototype.centerChanged=function(){var t=this;google.maps.event.addListener(this.map,"center_changed",function(){t.position.latitude=t.map.getCenter().lat(),t.position.longitude=t.map.getCenter().lng()})},t}()},{}],15:[function(t,a,i){a.exports=function(){"use strict";function a(t){this.options={radius:300,radiusIncrement:50,placeType:"restaurant",maxPlaces:12,dynamicSearch:!1},this.URLparams=WOL.app.utilities.getURLParams(),this.userOptions="undefined"==typeof t?{}:t,this.restaurants={},this.init(),this.getPlaces(this.options)}var i=t("../lightboxes/errorLocationLightbox.js"),n="http://www.jack-palmer.co.uk/wheel/api/getPlaces/";return a.prototype.init=function(){"undefined"!=typeof this.URLparams.lat&&(this.options.latitude=this.URLparams.lat),"undefined"!=typeof this.URLparams["long"]&&(this.options.longitude=this.URLparams["long"]),"undefined"!=typeof this.URLparams.radius&&(this.options.radius=this.URLparams.radius),"undefined"!=typeof this.URLparams.type&&(this.options.placeType=this.URLparams.type),"undefined"!=typeof this.URLparams.maxplaces&&(this.options.maxPlaces=this.URLparams.maxplaces),"undefined"!=typeof this.userOptions.latitude&&(this.options.latitude=this.userOptions.latitude),"undefined"!=typeof this.userOptions.longitude&&(this.options.longitude=this.userOptions.longitude),"undefined"!=typeof this.userOptions.radius&&(this.options.radius=this.userOptions.radius),"undefined"!=typeof this.userOptions.placeType&&(this.options.placeType=this.userOptions.placeType),"undefined"!=typeof this.userOptions.maxPlaces&&(this.options.maxPlaces=this.userOptions.maxPlaces),"undefined"!=typeof this.userOptions.dynamicSearch&&(this.options.dynamicSearch=this.userOptions.dynamicSearch)},a.prototype.getPlaces=function(t){var a=this;$.getJSON(n+this.buildQueryParams(t),function(i){i.length<t.maxPlaces&&t.radius<3e3&&t.dynamicSearch?a.expandSearchRadius(i,t):0===i.length?a.error():a.success(i,t)})},a.prototype.buildQueryParams=function(t){return"?latitude="+t.latitude+"&longitude="+t.longitude+"&radius="+t.radius+"&type="+t.placeType+"&maxplaces="+t.maxPlaces+"&minPrice=0&maxPrice=4"},a.prototype.expandSearchRadius=function(t,a){a.radius>=300&&(a.radiusIncrement=100),a.radius>=1e3&&(a.radiusIncrement=500),this.getPlaces({latitude:a.latitude,longitude:a.longitude,radius:parseInt(a.radius)+a.radiusIncrement,radiusIncrement:parseInt(a.radiusIncrement),placeType:a.placeType,maxPlaces:parseInt(a.maxPlaces),dynamicSearch:a.dynamicSearch})},a.prototype.success=function(t,a){this.restaurants=t,this.options.dynamicSearch=!1,a.dynamicSearch&&WOL.app.settings.setRadius(a.radius),WOL.app.wheel.setRestaurants(t),WOL.app.wheel.draw()},a.prototype.error=function(t){WOL.app.lightbox.ErrorLocationLightbox=new i},a}()},{"../lightboxes/errorLocationLightbox.js":8}],16:[function(t,a,i){a.exports=function(t){"use strict";function a(){}return a.prototype.getURLParams=function(){for(var t,a=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<i.length;n++)t=i[n].split("="),2==t.length&&(a.push(t[0]),a[t[0]]=t[1]);return a},a.prototype.blurBackground=function(){t(".unblur").removeClass("unblur").addClass("blur")},a.prototype.unblurBackground=function(){t(".blur").removeClass("blur").addClass("unblur")},a}(jQuery)},{}],17:[function(t,a,i){a.exports=function(){"use strict";function a(t){var a=document.getElementById(t),i=$("#"+t);this.elems={selector:"#"+t,canvas:a,$canvas:i},a.getContext&&(this.data={canvas:a,restaurants:n,width:600,height:600,startAngle:0,spinTimeout:null,isSpinning:!1,spinArcStart:10,spinTime:0,spinTimeTotal:0,spinVelocity:2e3,ctx:null,rouletteWheel:{},outsideRadius:250,textRadius:194,insideRadius:150,angle:null,text:null,drag:{clickedX:null,clickedY:null,currentDragX:null,currentDragY:null,previousDragX:null,previousDragY:null,isDragging:null,changedAngle:null,arcAngle:null}},this.init())}var i=t("../data/colours.js"),n=t("../data/restaurants.js"),e=t("../lightboxes/resultLightbox.js"),s="#spin";return a.prototype.init=function(){this.data.ctx=this.data.canvas.getContext("2d"),this.data.ctx.clearRect(0,0,this.data.width,this.data.height),this.data.ctx.strokeStyle="black",this.data.ctx.font="12px Helvetica, Arial",this.data.arc=Math.PI/(this.data.restaurants.length/2),this.draw(),this.addEvents()},a.prototype.addEvents=function(){var t=this;$(s).on("click",function(){t.retIsSpinning()||t.spin(!0)}),$(this.elems.selector).mousedown(function(a){t.data.drag.clickedX=a.pageX,t.data.drag.clickedY=a.pageY,t.data.drag.previousDragX=a.pageX,t.data.drag.previousDragY=a.pageY,t.data.drag.isDragging=!0}),$(this.elems.selector).mousemove(function(a){t.data.drag.isDragging&&!t.retIsSpinning()&&(t.data.drag.currentDragX=a.pageX,t.data.drag.currentDragY=a.pageY,t.data.drag.changedAngle=Math.atan2(t.data.drag.currentDragY-$(s).position().top,t.data.drag.currentDragX-$(s).position().left),t.data.drag.changedAngle-=Math.atan2(t.data.drag.previousDragY-$(s).position().top,t.data.drag.previousDragX-$(s).position().left),t.data.drag.arcAngle=Math.atan2(t.data.drag.currentDragY-$(s).position().top,t.data.drag.currentDragX-$(s).position().left),t.data.drag.arcAngle-=Math.atan2(t.data.drag.clickedY-$(s).position().top,t.data.drag.clickedX-$(s).position().left),t.addToStartAngle(t.data.drag.changedAngle),t.draw(!0),t.data.drag.previousDragY=t.data.drag.currentDragY,t.data.drag.previousDragX=t.data.drag.currentDragX)}),$(this.elems.selector).mouseup(function(a){t.data.drag.arcAngle>=.5&&!t.retIsSpinning()&&t.data.drag.changedAngle>0?t.spin(!0):t.data.drag.arcAngle<-4&&!t.retIsSpinning()&&t.data.drag.changedAngle>0?t.spin(!0):t.data.drag.arcAngle<=-.5&&!t.retIsSpinning()&&t.data.drag.changedAngle<0?t.spin(!1):t.data.drag.arcAngle>4&&!t.retIsSpinning()&&t.data.drag.changedAngle<0&&t.spin(!1),t.data.drag.isDragging=!1}),$(this.elems.selector).mouseout(function(a){t.data.drag.isDragging=!1})},a.prototype.draw=function(){var t=this;this.data.ctx.clearRect(0,0,this.data.width,this.data.height),this.data.restaurants.forEach(function(a,n){t.data.angle=t.data.startAngle+n*t.data.arc,t.data.ctx.fillStyle=i.bgColour[n],t.data.ctx.beginPath(),t.data.ctx.arc(t.data.width/2,t.data.height/2,t.data.outsideRadius,t.data.angle,t.data.angle+t.data.arc,!1),t.data.ctx.arc(t.data.width/2,t.data.height/2,t.data.insideRadius,t.data.angle+t.data.arc,t.data.angle,!0),t.data.ctx.fill(),t.data.ctx.save(),t.data.ctx.fillStyle=i.fontColour[n],t.data.ctx.translate(t.data.width/2+Math.cos(t.data.angle+t.data.arc/2)*t.data.textRadius,t.data.height/2+Math.sin(t.data.angle+t.data.arc/2)*t.data.textRadius),t.data.ctx.rotate(t.data.angle+t.data.arc/2+Math.PI/2),t.printName(a.name,-t.data.ctx.measureText(a.name).width/2,0,14,2*Math.PI*t.data.textRadius/t.data.restaurants.length-10),t.data.ctx.restore()}),this.drawArrow()},a.prototype.drawArrow=function(){this.data.ctx.fillStyle="#333",this.data.ctx.beginPath(),this.data.ctx.moveTo(this.data.width/2-4,this.data.height/2-(this.data.outsideRadius+25)),this.data.ctx.lineTo(this.data.width/2+4,this.data.height/2-(this.data.outsideRadius+25)),this.data.ctx.lineTo(this.data.width/2+4,this.data.height/2-(this.data.outsideRadius+15)),this.data.ctx.lineTo(this.data.width/2+9,this.data.height/2-(this.data.outsideRadius+15)),this.data.ctx.lineTo(this.data.width/2+0,this.data.height/2-(this.data.outsideRadius-0)),this.data.ctx.lineTo(this.data.width/2-9,this.data.height/2-(this.data.outsideRadius+15)),this.data.ctx.lineTo(this.data.width/2-4,this.data.height/2-(this.data.outsideRadius+15)),this.data.ctx.lineTo(this.data.width/2-4,this.data.height/2-(this.data.outsideRadius+25)),this.data.ctx.fill()},a.prototype.spin=function(t){this.data.spinAngleStart=10*Math.random()+10,this.data.spinTime=0,this.data.spinTimeTotal=3*Math.random()+4*this.data.spinVelocity,!this.data.isSpinning&&t?(this.data.isSpinning=!0,this.rotate(!0)):this.data.isSpinning||t||(this.data.isSpinning=!0,this.rotate(!1))},a.prototype.retIsSpinning=function(){return this.data.isSpinning},a.prototype.addToStartAngle=function(t){this.data.startAngle+=t},a.prototype.rotate=function(t){var a=this;if(this.data.spinTime+=30,this.data.spinTime>=this.data.spinTimeTotal)return this.stopRotate(),void(this.data.isSpinning=!1);var i=this.data.spinAngleStart-this.easeOut(this.data.spinTime,0,this.data.spinAngleStart,this.data.spinTimeTotal);t?this.data.startAngle+=i*Math.PI/180:this.data.startAngle-=i*Math.PI/180,this.draw(),this.data.spinTimeout=setTimeout(function(){a.rotate(t)},30)},a.prototype.stopRotate=function(){clearTimeout(this.data.spinTimeout);var t=180*this.data.startAngle/Math.PI+90,a=180*this.data.arc/Math.PI,i=Math.floor((360-t%360)/a);this.data.ctx.save(),0>t&&(t=Math.abs(t),i=Math.floor(t%360/a)),WOL.app.lightbox.Result=new e(this.data.restaurants[i]),this.data.ctx.restore()},a.prototype.printName=function(t,a,i,n,e){var s,o,r,l,c;if(e=e||0,0>=e)return void this.data.ctx.fillText(t,a,i);for(c=1;c<=t.length;c++)if(s=t.substr(0,c),this.data.ctx.measureText(s).width>e)return o=" "!=t.charAt(c-2)?"-":"",r=t.substr(0,c-1)+o,l=t.substr(c-1),this.data.ctx.fillText(r,-this.data.ctx.measureText(r).width/2,i-n),void this.printName(l,-this.data.ctx.measureText(l).width/2,i+n,n,e-10);this.data.ctx.fillText(t,a,i?i-n:i)},a.prototype.easeOut=function(t,a,i,n){var e=(t/=n)*t,s=e*t;return a+i*(s+-3*e+3*t)},a.prototype.setRestaurants=function(t){this.data.restaurants=t,this.data.arc=Math.PI/(this.data.restaurants.length/2)},a}()},{"../data/colours.js":4,"../data/restaurants.js":5,"../lightboxes/resultLightbox.js":12}],18:[function(t,a,i){a.exports=function(t){"use strict"}()},{}],19:[function(t,a,i){a.exports=function(){"use strict";var a=t("../modules/utilities"),i=t("../modules/wheel.js"),n=t("../elements/settings.js"),e=t("../lightboxes/localisationLightbox.js"),s=t("../modules/places.js");WOL.app.utilities=new a,WOL.app.wheel=new i("wheel"),WOL.app.settings=new n;var o="undefined"==typeof WOL.app.settings.URLparams.lat||"undefined"==typeof WOL.app.settings.URLparams["long"];o?WOL.app.lightbox.Localisation=new e:WOL.app.places=new s,$("#new-location").on("click",function(){if("undefined"!=typeof WOL.app.lightbox.Localisation&&!WOL.app.lightbox.Localisation.isCurrentlyOpen){for(var t in WOL.app.lightbox)WOL.app.lightbox[t].closeWindow();WOL.app.lightbox.Localisation=new e}})}()},{"../elements/settings.js":6,"../lightboxes/localisationLightbox.js":10,"../modules/places.js":15,"../modules/utilities":16,"../modules/wheel.js":17}],20:[function(t,a,i){a.exports={app:{lightbox:{}},modules:{},global:{},page:{},utils:{},data:{}}},{}],21:[function(t,a,i){a.exports='<div id="localisation-error" class="alert alert-danger localisation" role="alert"><p>Oops! No places found. <button id="localisation-continue-button" type="button" class="btn btn-danger btn-sm"> Continue anyway</button></p></div>'},{}],22:[function(t,a,i){a.exports='<div id="geolocation" class="panel panel-default localisation search-localisation"><div class="panel-body"><p>Hang on a moment, we are just getting your location<span class="one">.</span><span class="two">.</span><span class="three">.</span></p></div></div>'},{}],23:[function(t,a,i){a.exports='<div id="localisation" class="panel panel-default select-localisation"><div class="panel-body"><p>Please select an option</p> <button type="button" id="location-option-current" class="btn btn-success">Use my location</button> <button type="button" id="location-option-find" class="btn btn-info">Find a location</button></div></div>'},{}],24:[function(t,a,i){a.exports='<div id="map" class="panel panel-default panel-map"><div class="panel-body"><div id="map-header"> <input type="text" id="map-search" class="search controls" name="search" placeholder="Enter postcode or place name"/> <button type="button" class="select-location btn btn-primary btn-lg">Select Location</button> <input type="hidden" name="lat" id="latBox" disabled/> <input type="hidden" name="lng" id="lngBox" disabled/></div><div id="map-canvas"></div><div class="center-marker"></div></div></div>'},{}],25:[function(t,a,i){var n=t("hogan.js");a.exports=new n.Template({code:function(t,a,i){var n=this;return n.b(i=i||""),n.b('<div id="result" class="panel panel-default result">\r'),n.b("\n"+i),n.b('  <div class="panel-body">\r'),n.b("\n"+i),n.b('    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r'),n.b("\n"+i),n.b("    <h2>"),n.b(n.v(n.f("title",t,a,0))),n.b("</h2>\r"),n.b("\n"+i),n.b('    <p class="vicinity">'),
n.b(n.v(n.f("vicinity",t,a,0))),n.b("</p>\r"),n.b("\n"+i),n.b('    <div class="rating">\r'),n.b("\n"+i),n.b('      <div class="rating-foreground" style="width:0%;">\r'),n.b("\n"+i),n.b('        <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>\r'),n.b("\n"+i),n.b("      </div>\r"),n.b("\n"+i),n.b('      <div class="rating-background">\r'),n.b("\n"+i),n.b('        <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>\r'),n.b("\n"+i),n.b("      </div>\r"),n.b("\n"+i),n.b("    </div>\r"),n.b("\n"+i),n.b("    <p>\r"),n.b("\n"+i),n.b('      <a class="map" target="_blank" href="'),n.b(n.v(n.f("href",t,a,0))),n.b('">View on map</a>\r'),n.b("\n"+i),n.b("    </p>\r"),n.b("\n"+i),n.b("  </div>\r"),n.b("\n"+i),n.b("</div>\r"),n.b("\n"),n.fl()},partials:{},subs:{}},'<div id="result" class="panel panel-default result">\r\n  <div class="panel-body">\r\n    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n    <h2>{{title}}</h2>\r\n    <p class="vicinity">{{vicinity}}</p>\r\n    <div class="rating">\r\n      <div class="rating-foreground" style="width:0%;">\r\n        <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>\r\n      </div>\r\n      <div class="rating-background">\r\n        <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>\r\n      </div>\r\n    </div>\r\n    <p>\r\n      <a class="map" target="_blank" href="{{href}}">View on map</a>\r\n    </p>\r\n  </div>\r\n</div>\r\n',n)},{"hogan.js":2}],26:[function(t,a,i){a.exports='<div id="settings"><a class="btn btn-primary btn-lg blur settings" role="button"><span class="glyphicon glyphicon-cog"></span></a><div class="clickme blur"><p>Click me!</p></div><div class="panel panel-default settings blur"><div class="panel-body"><div class="radio"> <label><input type="radio" name="placeType" class="placetype restaurant" value="restaurant"> Restaurant</label></div><div class="radio"> <label><input type="radio" name="placeType" class="placetype food" value="food"> Food</label></div><div class="radio"> <label><input type="radio" name="placeType" class="placetype bar" value="bar"> Bar</label></div><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-pushpin"></span> Latitude</span> <input type="number" class="latitude form-control" placeholder="Latitude"></div><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-pushpin"></span> Longitude</span> <input type="number" class="longitude form-control" placeholder="Longitude"></div><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-record"></span> Radius (m)</span> <input type="number" min="1" class="radius form-control" placeholder="Radius"></div><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span> # of Places</span> <input type="number" min="1" max="12" class="maxplaces form-control" placeholder="# of Places"></div><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-share"></span> Share link</span> <input type="text" class="sharelink form-control" value=""></div><div class="checkbox"> <label><input type="checkbox" class="dynamic-search"> Dynamic Search</label></div> <button type="submit" id="settings-search" class="btn btn-primary"><span class="glyphicon glyphicon-search"></span> Search</button></div></div></div>'},{}]},{},[7]);
//# sourceMappingURL=../maps/all.js.map